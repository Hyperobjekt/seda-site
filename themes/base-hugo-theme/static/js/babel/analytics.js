"use strict";function _readOnlyError(a){throw new Error("\""+a+"\" is read-only")}/**
 * Analytics listeners
 */(function(a){// console.log('Loading Analytics listeners');
var b={};if(b.push=function(a){dataLayer.push(a)},b.navigate=function(a,b){b?window.open(a,"_blank"):window.location.href=a},b.init=function(){a(".gta-event-CTAClick").on("click touchstart",function(c){c.preventDefault();var d=a(c.currentTarget).attr("href"),e="_blank"===a(c.currentTarget).attr("target"),f=a(c.currentTarget).attr("aria-label")?a(c.currentTarget).attr("aria-label"):a(c.currentTarget).find("span").html(),g={event:"CTAClick",CTADestination:encodeURI(d),CTAPrompt:f,eventCallback:function eventCallback(){b.navigate(d,e)}};b.push(g)}),a(".gta-event-bioExpanded").on("click touchstart",function(c){// console.log('.gta-event-bioExpanded');
var d=a(c.currentTarget);// console.log($target);
b.push({event:"bioExpanded"})}),a(".gta-event-eMailSignupAttempt").on("click touchstart",function(){// console.log('.gta-event-eMailSignupAttempt');
b.push({event:"eMailSignupAttempt"})}),a(".gta-event-postSelected").on("click touchstart",function(c){c.preventDefault();var d=a(c.currentTarget).attr("href"),e={event:"postSelected",discoverySelection:encodeURI(d),eventCallback:function eventCallback(){window.location.href=d}};b.push(e)}),a(".gta-event-showAbstractandVersion").on("click touchstart",function(c){// console.log('.gta-event-showAbstractandVersion');
var d=a(c.currentTarget),e=null;e=a(".row.subnav.small-tab-nav").is(":visible")?(_readOnlyError("$paperCategory"),a(".row.subnav.small-tab-nav").find("ul.anchor-links li a.active").text()):(_readOnlyError("$paperCategory"),a(".row.subnav.large-tab-nav").find("#researchTabs li a.active").text());// console.log('$paperCategory: ' + $paperCategory);
var f=null;f=a(c.currentTarget).closest(".research-paper").find(".info h5").text();// console.log($paperName);
var g={event:"showAbstractandVersion",paperCategory:e?e:"Unavailable",paperName:f?f:"Unavailable"};b.push(g)}),a(".gta-event-categorySelected").on("click touchstart",function(c){// console.log('.gta-event-categorySelected');
var d=a(c.currentTarget),e=d.text(),f={event:"categorySelected",paperCategory:e?e:"Unavailable"};b.push(f)}),a(".gta-event-paperDownloadbyVersion").on("click touchstart",function(c){// console.log('.gta-event-paperDownloadbyVersion');
// e.preventDefault();
var d=a(c.currentTarget),e=null;e=a(c.currentTarget).closest(".research-paper").find(".info h5").text();// console.log($paperName);
var f=d.attr("data-date"),g={event:"paperDownloadbyVersion",paperVersion:f,paperName:e};// console.log($paperVersion);
b.push(g)}),a(".gta-event-paperDownloadLatest").on("click touchstart",function(c){// console.log('.gta-event-paperDownloadLatest');
var d=a(c.currentTarget),e=d.closest(".research-paper").find(".info h5").text(),f=d.attr("data-date");b.push({event:"paperDownloadLatest",paperVersion:f,paperName:e})}),a(".gta-event-articleSelected").on("click touchstart",function(c){c.preventDefault();var d=a(c.currentTarget).attr("href"),e=a(c.currentTarget).closest(".row.news-item").find("h4 a"),f=e.text(),g=e.attr("data-outlet"),h="_blank"===a(c.currentTarget).attr("target");b.push({event:"articleSelected",newsArticleName:f,newsArticlePublication:g,eventCallback:function eventCallback(){b.navigate(d,h)}})}),a(".gta-event-faqTopicExpanded").on("click touchstart",function(c){// console.log('.gta-event-faqTopicExpanded');
var d=a(c.currentTarget),e=a(c.currentTarget).find("h5").text();b.push({event:"faqTopicExpanded",faqTopExpansion:e})});/**
     * Manual callback handler, discoveries article scroll depth
     * false == no scroll to track from previous page
     */var c=bamPercentPageViewed.callback();if(!1!==c)// console.group('Callback');
// console.log(callbackData);
// console.groupEnd();
// If the data is from a discoveries page, then send.
if(-1<c.documentLocation.indexOf("discoveries")){console.log("Discoveries page. Pushing to GA.");var d={event:"discoveryScrollDepthSave",discoveryScrollDepth:c.scrollPercent,discoveryScrollDepthLocation:c.documentLocation};b.push(d)}else;/**
    * Init the bamPercentPageViewed plugin
    */(function(){var a=onload,b=function(){bamPercentPageViewed.init({trackDelay:"2000",percentInterval:"10"})};onload="function"==typeof a?function onload(){b(),a()}:b})(window),a(".gta-event-dataDownload a").on("click touchstart",function(c){// console.log('Data download link selected.');
var d=a(c.currentTarget),e=d.attr("href"),f=1===d.closest("table").find("th").length?d.closest("table").find("th").text():"Not available",g=d.closest(".tab-pane.active").attr("id")?(d.closest(".tab-pane.active").attr("id")+"").replace("version","").replace("-","."):"Not available";b.push({event:"dataDownloaded",dataFile:e,dataHeading:f,dataVersion:g})}),a(".gta-event-navClick").on("click touchstart",function(c){c.preventDefault();var d=a(c.currentTarget),e=d.attr("href"),f="_blank"===d.attr("target"),g=null;1<=d.closest("#drawer").length&&(g="main"),1<=d.closest("footer").length&&(g="footer");var h=d.text().trim();0>=h.length&&(h=d.attr("href")),0>=h.length&&(h=d.find("span, h1")[0].text().trim());// console.log($navType);
// console.log($navItem);
var i={event:"navClick",navType:g,navItem:h,eventCallback:function eventCallback(){b.navigate(e,f)}};b.push(i)}),window.addEventListener("error",function(a){// console.log('Error detected in browser window. Sending GA report.');
var c={event:"error",errorMessage:"Error originating from "+a.filename+" at line "+a.lineno+", column "+a.colno+":\n"+a.message};b.push(c)})},!!dataLayer)// console.log('dataLayer found');
var c=1<=a("body.type-discoveries").length?3e3:1600,d=setTimeout(function(){3<=dataLayer.length?b.init():console.log("The GTM dataLayer cannot be found... Skipping analytics listeners.")},c);else console.log("Error! The GTM dataLayer cannot be found... Skipping analytics listeners.")})(jQuery);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9hbmFseXRpY3MuanMiXSwibmFtZXMiOlsiJCIsImFuYWx5dGljcyIsInB1c2giLCJkYXRhIiwiZGF0YUxheWVyIiwibmF2aWdhdGUiLCJ0YXJnZXQiLCJibGFuayIsIndpbmRvdyIsIm9wZW4iLCJsb2NhdGlvbiIsImhyZWYiLCJpbml0Iiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCIkdGFyZ2V0IiwiY3VycmVudFRhcmdldCIsImF0dHIiLCIkdGFyZ2V0QmxhbmsiLCIkdGFyZ2V0UHJvbXB0IiwiZmluZCIsImh0bWwiLCJfb2JqIiwiZW5jb2RlVVJJIiwiJHBhcGVyQ2F0ZWdvcnkiLCJpcyIsInRleHQiLCIkcGFwZXJOYW1lIiwiY2xvc2VzdCIsIiRwYXBlclZlcnNpb24iLCIkdGl0bGVOb2RlIiwiJG5ld3NBcnRpY2xlTmFtZSIsIiRuZXdzQXJ0aWNsZVB1YmxpY2F0aW9uIiwiJHRvcGljIiwiY2FsbGJhY2tEYXRhIiwiYmFtUGVyY2VudFBhZ2VWaWV3ZWQiLCJjYWxsYmFjayIsImRvY3VtZW50TG9jYXRpb24iLCJpbmRleE9mIiwiY29uc29sZSIsImxvZyIsInNjcm9sbFBlcmNlbnQiLCJvIiwib25sb2FkIiwibiIsInRyYWNrRGVsYXkiLCJwZXJjZW50SW50ZXJ2YWwiLCIkaHJlZiIsIiRoZWFkaW5nIiwibGVuZ3RoIiwiJHZlcnNpb24iLCJyZXBsYWNlIiwiJG5hdlR5cGUiLCIkbmF2SXRlbSIsInRyaW0iLCJhZGRFdmVudExpc3RlbmVyIiwiZXJyb3IiLCJmaWxlbmFtZSIsImxpbmVubyIsImNvbG5vIiwibWVzc2FnZSIsIndhaXRUaW1lIiwidGltZW91dCIsInNldFRpbWVvdXQiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJrRkFBQTs7R0FHQSxDQUFDLFNBQVNBLENBQVQsQ0FBWSxDQUNYO0FBQ0EsR0FBTUMsQ0FBQUEsQ0FBUyxDQUFHLEVBQWxCLENBOFJBLEdBN1JBQSxDQUFTLENBQUNDLElBQVYsQ0FBaUIsU0FBVUMsQ0FBVixD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a0MsQ0FBSyxDQUFDQyxRQUFsQyxDQUNBLFdBREEsQ0FDY0QsQ0FBSyxDQUFDRSxNQURwQixDQUM2QixXQUQ3QixDQUMyQ0YsQ0FBSyxDQUFDRyxLQURqRCxDQUVBLEtBRkEsQ0FFUUgsQ0FBSyxDQUFDSSxPQUpuQixDQUFiLENBTUE1RCxDQUFTLENBQUNDLElBQVYsQ0FBZXFCLENBQWYsQ0FDRCxDQVRELENBVUQsQ0FDRCxDQUFJLENBQUMsQ0FBQ25CLFNBQU4sQ0FDRTtBQURGLEdBRVEwRCxDQUFBQSxDQUFRLENBQTBDLENBQXZDLEVBQUM5RCxDQUFDLENBQUMsdUJBQUQsQ0FBRCxDQUEyQmtELE1BQTVCLENBQTJDLEdBQTNDLENBQWtELElBRnJFLENBR1FhLENBQU8sQ0FBR0MsVUFBVSxDQUFDLFVBQVcsQ0FDWixDQUFwQixFQUFBNUQsU0FBUyxDQUFDOEMsTUFEc0IsQ0FFbENqRCxDQUFTLENBQUNXLElBQVYsRUFGa0MsQ0FJbEM0QixPQUFPLENBQUNDLEdBQVIsQ0FBWSxvRUFBWixDQUVILENBTnlCLENBTXZCcUIsQ0FOdUIsQ0FINUIsS0FXRXRCLENBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDJFQUFaLENBRUgsQ0E3U0QsRUE2U0d3QixNQTdTSCxDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBbmFseXRpY3MgbGlzdGVuZXJzXG4gKi9cbihmdW5jdGlvbigkKSB7XG4gIC8vIGNvbnNvbGUubG9nKCdMb2FkaW5nIEFuYWx5dGljcyBsaXN0ZW5lcnMnKTtcbiAgY29uc3QgYW5hbHl0aWNzID0ge307XG4gIGFuYWx5dGljcy5wdXNoID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnYW5hbHl0aWNzLnB1c2gnKTtcbiAgICBkYXRhTGF5ZXIucHVzaChkYXRhKTtcbiAgfVxuICBhbmFseXRpY3MubmF2aWdhdGUgPSAodGFyZ2V0LCBibGFuaykgPT4ge1xuICAgIGlmIChibGFuaykge1xuICAgICAgd2luZG93Lm9wZW4odGFyZ2V0LCAnX2JsYW5rJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdGFyZ2V0O1xuICAgIH1cbiAgfVxuICBhbmFseXRpY3MuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnYW5hbHl0aWNzLmluaXQnKTtcblxuICAgIC8vIEV2ZW50OiBDVEFDbGlja1xuICAgICQoJy5ndGEtZXZlbnQtQ1RBQ2xpY2snKS5vbignY2xpY2sgdG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnLmd0YS1ldmVudC1DVEFDbGljaycpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgJHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdocmVmJyk7XG4gICAgICBjb25zdCAkdGFyZ2V0QmxhbmsgPSAoJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ3RhcmdldCcpID09PSAnX2JsYW5rJyk7XG4gICAgICBjb25zdCAkdGFyZ2V0UHJvbXB0ID0gJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2FyaWEtbGFiZWwnKSA/XG4gICAgICAgICQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdhcmlhLWxhYmVsJykgOlxuICAgICAgICAkKGUuY3VycmVudFRhcmdldCkuZmluZCgnc3BhbicpLmh0bWwoKTtcbiAgICAgIGNvbnN0IF9vYmogPSB7XG4gICAgICAgICdldmVudCcgOiAnQ1RBQ2xpY2snLFxuICAgICAgICAnQ1RBRGVzdGluYXRpb24nOiBlbmNvZGVVUkkoJHRhcmdldCksXG4gICAgICAgICdDVEFQcm9tcHQnOiAkdGFyZ2V0UHJvbXB0LFxuICAgICAgICAnZXZlbnRDYWxsYmFjaycgOiAoKSA9PiB7XG4gICAgICAgICAgICBhbmFseXRpY3MubmF2aWdhdGUoJHRhcmdldCwgJHRhcmdldEJsYW5rKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYW5hbHl0aWNzLnB1c2goX29iaik7XG4gICAgfSk7XG5cbiAgICAvLyBFdmVudDogYmlvRXhwYW5kZWRcbiAgICAkKCcuZ3RhLWV2ZW50LWJpb0V4cGFuZGVkJykub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgLy8gY29uc29sZS5sb2coJy5ndGEtZXZlbnQtYmlvRXhwYW5kZWQnKTtcbiAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgICAvLyBjb25zb2xlLmxvZygkdGFyZ2V0KTtcbiAgICAgIGNvbnN0IF9vYmogPSB7XG4gICAgICAgICdldmVudCcgOiAnYmlvRXhwYW5kZWQnXG4gICAgICB9XG4gICAgICBhbmFseXRpY3MucHVzaChfb2JqKTtcbiAgICB9KTtcblxuICAgIC8vIEV2ZW50OiBlTWFpbFNpZ251cFxuICAgICQoJy5ndGEtZXZlbnQtZU1haWxTaWdudXBBdHRlbXB0Jykub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgLy8gY29uc29sZS5sb2coJy5ndGEtZXZlbnQtZU1haWxTaWdudXBBdHRlbXB0Jyk7XG4gICAgICBjb25zdCBfb2JqID0ge1xuICAgICAgICAnZXZlbnQnIDogJ2VNYWlsU2lnbnVwQXR0ZW1wdCdcbiAgICAgIH1cbiAgICAgIGFuYWx5dGljcy5wdXNoKF9vYmopO1xuICAgIH0pO1xuXG4gICAgLy8gRXZlbnQ6IHBvc3RTZWxlY3RlZFxuICAgICQoJy5ndGEtZXZlbnQtcG9zdFNlbGVjdGVkJykub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgLy8gY29uc29sZS5sb2coJy5ndGEtZXZlbnQtcG9zdFNlbGVjdGVkJyk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCAkdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2hyZWYnKTtcbiAgICAgIGNvbnN0IF9vYmogPSB7XG4gICAgICAgICdldmVudCcgOiAncG9zdFNlbGVjdGVkJyxcbiAgICAgICAgJ2Rpc2NvdmVyeVNlbGVjdGlvbic6IGVuY29kZVVSSSgkdGFyZ2V0KSxcbiAgICAgICAgJ2V2ZW50Q2FsbGJhY2snIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICR0YXJnZXQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGFuYWx5dGljcy5wdXNoKF9vYmopO1xuICAgIH0pO1xuXG4gICAgLy8gRXZlbnQ6IHNob3dBYnN0cmFjdGFuZFZlcnNpb25cbiAgICAvLyBSZXBvcnRzOiBwYXBlckNhdGVnb3J5LCBwYXBlck5hbWVcbiAgICAkKCcuZ3RhLWV2ZW50LXNob3dBYnN0cmFjdGFuZFZlcnNpb24nKS5vbignY2xpY2sgdG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnLmd0YS1ldmVudC1zaG93QWJzdHJhY3RhbmRWZXJzaW9uJyk7XG4gICAgICBjb25zdCAkdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgY29uc3QgJHBhcGVyQ2F0ZWdvcnkgPSBudWxsO1xuICAgICAgaWYgKCQoJy5yb3cuc3VibmF2LnNtYWxsLXRhYi1uYXYnKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnTW9iaWxlIHZpZXcnKTtcbiAgICAgICAgJHBhcGVyQ2F0ZWdvcnkgPSAkKCcucm93LnN1Ym5hdi5zbWFsbC10YWItbmF2JykuZmluZCgndWwuYW5jaG9yLWxpbmtzIGxpIGEuYWN0aXZlJykudGV4dCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHBhcGVyQ2F0ZWdvcnkgPSAkKCcucm93LnN1Ym5hdi5sYXJnZS10YWItbmF2JykuZmluZCgnI3Jlc2VhcmNoVGFicyBsaSBhLmFjdGl2ZScpLnRleHQoKTtcbiAgICAgIH1cbiAgICAgIC8vIGNvbnNvbGUubG9nKCckcGFwZXJDYXRlZ29yeTogJyArICRwYXBlckNhdGVnb3J5KTtcbiAgICAgIGxldCAkcGFwZXJOYW1lID0gbnVsbDtcbiAgICAgICRwYXBlck5hbWUgPSAkKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLnJlc2VhcmNoLXBhcGVyJykuZmluZCgnLmluZm8gaDUnKS50ZXh0KCk7XG4gICAgICAvLyBjb25zb2xlLmxvZygkcGFwZXJOYW1lKTtcbiAgICAgIGNvbnN0IF9vYmogPSB7XG4gICAgICAgICdldmVudCcgOiAnc2hvd0Fic3RyYWN0YW5kVmVyc2lvbicsXG4gICAgICAgICdwYXBlckNhdGVnb3J5JzogJHBhcGVyQ2F0ZWdvcnkgPyAkcGFwZXJDYXRlZ29yeSA6ICdVbmF2YWlsYWJsZScsXG4gICAgICAgICdwYXBlck5hbWUnOiAkcGFwZXJOYW1lID8gJHBhcGVyTmFtZSA6ICdVbmF2YWlsYWJsZSdcbiAgICAgIH1cbiAgICAgIGFuYWx5dGljcy5wdXNoKF9vYmopO1xuICAgIH0pO1xuXG4gICAgLy8gRXZlbnQ6IGNhdGVnb3J5U2VsZWN0ZWRcbiAgICAvLyBSZXBvcnRzOiBwYXBlckNhdGVnb3J5XG4gICAgJCgnLmd0YS1ldmVudC1jYXRlZ29yeVNlbGVjdGVkJykub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgLy8gY29uc29sZS5sb2coJy5ndGEtZXZlbnQtY2F0ZWdvcnlTZWxlY3RlZCcpO1xuICAgICAgY29uc3QgJHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgIGNvbnN0ICRwYXBlckNhdGVnb3J5ID0gJHRhcmdldC50ZXh0KCk7XG4gICAgICAvLyBjb25zb2xlLmxvZygkcGFwZXJDYXRlZ29yeSk7XG4gICAgICBjb25zdCBfb2JqID0ge1xuICAgICAgICAnZXZlbnQnIDogJ2NhdGVnb3J5U2VsZWN0ZWQnLFxuICAgICAgICAncGFwZXJDYXRlZ29yeSc6ICRwYXBlckNhdGVnb3J5ID8gJHBhcGVyQ2F0ZWdvcnkgOiAnVW5hdmFpbGFibGUnXG4gICAgICB9XG4gICAgICBhbmFseXRpY3MucHVzaChfb2JqKTtcbiAgICB9KTtcblxuICAgIC8vIEV2ZW50OiBwYXBlckRvd25sb2FkYnlWZXJzaW9uXG4gICAgLy8gUmVwb3J0czogcGFwZXJWZXJzaW9uLCBwYXBlck5hbWVcbiAgICAkKCcuZ3RhLWV2ZW50LXBhcGVyRG93bmxvYWRieVZlcnNpb24nKS5vbignY2xpY2sgdG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnLmd0YS1ldmVudC1wYXBlckRvd25sb2FkYnlWZXJzaW9uJyk7XG4gICAgICAvLyBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCAkdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgbGV0ICRwYXBlck5hbWUgPSBudWxsO1xuICAgICAgJHBhcGVyTmFtZSA9ICQoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcucmVzZWFyY2gtcGFwZXInKS5maW5kKCcuaW5mbyBoNScpLnRleHQoKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCRwYXBlck5hbWUpO1xuICAgICAgY29uc3QgJHBhcGVyVmVyc2lvbiA9ICR0YXJnZXQuYXR0cignZGF0YS1kYXRlJyk7XG4gICAgICAvLyBjb25zb2xlLmxvZygkcGFwZXJWZXJzaW9uKTtcbiAgICAgIGNvbnN0IF9vYmogPSB7XG4gICAgICAgICdldmVudCc6ICdwYXBlckRvd25sb2FkYnlWZXJzaW9uJyxcbiAgICAgICAgJ3BhcGVyVmVyc2lvbic6ICRwYXBlclZlcnNpb24sXG4gICAgICAgICdwYXBlck5hbWUnOiAkcGFwZXJOYW1lXG4gICAgICB9XG4gICAgICBhbmFseXRpY3MucHVzaChfb2JqKTtcbiAgICB9KTtcblxuICAgIC8vIEV2ZW50OiBwYXBlckRvd25sb2FkTGF0ZXN0XG4gICAgLy8gUmVwb3J0czogcGFwZXJWZXJzaW9uLCBwYXBlck5hbWVcbiAgICAkKCcuZ3RhLWV2ZW50LXBhcGVyRG93bmxvYWRMYXRlc3QnKS5vbignY2xpY2sgdG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnLmd0YS1ldmVudC1wYXBlckRvd25sb2FkTGF0ZXN0Jyk7XG4gICAgICBjb25zdCAkdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgY29uc3QgJHBhcGVyTmFtZSA9ICR0YXJnZXQuY2xvc2VzdCgnLnJlc2VhcmNoLXBhcGVyJykuZmluZCgnLmluZm8gaDUnKS50ZXh0KCk7XG4gICAgICBjb25zdCAkcGFwZXJWZXJzaW9uID0gJHRhcmdldC5hdHRyKCdkYXRhLWRhdGUnKTtcbiAgICAgIGNvbnN0IF9vYmogPSB7XG4gICAgICAgICdldmVudCc6ICdwYXBlckRvd25sb2FkTGF0ZXN0JyxcbiAgICAgICAgJ3BhcGVyVmVyc2lvbic6ICRwYXBlclZlcnNpb24sXG4gICAgICAgICdwYXBlck5hbWUnOiAkcGFwZXJOYW1lXG4gICAgICB9XG4gICAgICBhbmFseXRpY3MucHVzaChfb2JqKTtcbiAgICB9KTtcblxuICAgIC8vIEV2ZW50OiBhcnRpY2xlU2VsZWN0ZWRcbiAgICAvLyBSZXBvcnRzOiBuZXdzQXJ0aWNsZU5hbWUsIG5ld3NBcnRpY2xlUHVibGljYXRpb25cbiAgICAkKCcuZ3RhLWV2ZW50LWFydGljbGVTZWxlY3RlZCcpLm9uKCdjbGljayB0b3VjaHN0YXJ0JywgZnVuY3Rpb24oZSkge1xuICAgICAgLy8gY29uc29sZS5sb2coJy5ndGEtZXZlbnQtYXJ0aWNsZVNlbGVjdGVkJyk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCAkdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2hyZWYnKTtcbiAgICAgIGNvbnN0ICR0aXRsZU5vZGUgPSAkKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLnJvdy5uZXdzLWl0ZW0nKS5maW5kKCdoNCBhJyk7XG4gICAgICBjb25zdCAkbmV3c0FydGljbGVOYW1lID0gJHRpdGxlTm9kZS50ZXh0KCk7XG4gICAgICBjb25zdCAkbmV3c0FydGljbGVQdWJsaWNhdGlvbiA9ICR0aXRsZU5vZGUuYXR0cignZGF0YS1vdXRsZXQnKTtcbiAgICAgIGNvbnN0ICR0YXJnZXRCbGFuayA9ICgkKGUuY3VycmVudFRhcmdldCkuYXR0cigndGFyZ2V0JykgPT09ICdfYmxhbmsnKTtcbiAgICAgIGNvbnN0IF9vYmogPSB7XG4gICAgICAgICdldmVudCc6ICdhcnRpY2xlU2VsZWN0ZWQnLFxuICAgICAgICAnbmV3c0FydGljbGVOYW1lJzogJG5ld3NBcnRpY2xlTmFtZSxcbiAgICAgICAgJ25ld3NBcnRpY2xlUHVibGljYXRpb24nOiAkbmV3c0FydGljbGVQdWJsaWNhdGlvbixcbiAgICAgICAgJ2V2ZW50Q2FsbGJhY2snIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhbmFseXRpY3MubmF2aWdhdGUoJHRhcmdldCwgJHRhcmdldEJsYW5rKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYW5hbHl0aWNzLnB1c2goX29iaik7XG4gICAgfSk7XG5cbiAgICAvLyBFdmVudDogZmFxVG9waWNFeHBhbmRlZFxuICAgIC8vIFJlcG9ydHM6IGZhcVRvcGljRXhwYW5zaW9uXG4gICAgJCgnLmd0YS1ldmVudC1mYXFUb3BpY0V4cGFuZGVkJykub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnLmd0YS1ldmVudC1mYXFUb3BpY0V4cGFuZGVkJyk7XG4gICAgICBjb25zdCAkdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgY29uc3QgJHRvcGljID0gJChlLmN1cnJlbnRUYXJnZXQpLmZpbmQoJ2g1JykudGV4dCgpO1xuICAgICAgLy8gY29uc29sZS5sb2coJyR0b3BpYyBpcyAnLCAkdG9waWMpO1xuICAgICAgY29uc3QgX29iaiA9IHtcbiAgICAgICAgJ2V2ZW50JyA6ICdmYXFUb3BpY0V4cGFuZGVkJyxcbiAgICAgICAgJ2ZhcVRvcEV4cGFuc2lvbic6ICR0b3BpY1xuICAgICAgfVxuICAgICAgYW5hbHl0aWNzLnB1c2goX29iaik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBNYW51YWwgY2FsbGJhY2sgaGFuZGxlciwgZGlzY292ZXJpZXMgYXJ0aWNsZSBzY3JvbGwgZGVwdGhcbiAgICAgKiBmYWxzZSA9PSBubyBzY3JvbGwgdG8gdHJhY2sgZnJvbSBwcmV2aW91cyBwYWdlXG4gICAgICovXG4gICAgdmFyIGNhbGxiYWNrRGF0YSA9IGJhbVBlcmNlbnRQYWdlVmlld2VkLmNhbGxiYWNrKCk7XG4gICAgaWYgKGNhbGxiYWNrRGF0YSAhPT0gZmFsc2UpIHtcbiAgICAgIC8vIGNvbnNvbGUuZ3JvdXAoJ0NhbGxiYWNrJyk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhjYWxsYmFja0RhdGEpO1xuICAgICAgLy8gY29uc29sZS5ncm91cEVuZCgpO1xuICAgICAgLy8gSWYgdGhlIGRhdGEgaXMgZnJvbSBhIGRpc2NvdmVyaWVzIHBhZ2UsIHRoZW4gc2VuZC5cbiAgICAgIGlmIChjYWxsYmFja0RhdGEuZG9jdW1lbnRMb2NhdGlvbi5pbmRleE9mKCdkaXNjb3ZlcmllcycpID4gLTEpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Rpc2NvdmVyaWVzIHBhZ2UuIFB1c2hpbmcgdG8gR0EuJyk7XG4gICAgICAgIGNvbnN0IF9vYmogPSB7XG4gICAgICAgICAgJ2V2ZW50JzogJ2Rpc2NvdmVyeVNjcm9sbERlcHRoU2F2ZScsXG4gICAgICAgICAgJ2Rpc2NvdmVyeVNjcm9sbERlcHRoJzogY2FsbGJhY2tEYXRhLnNjcm9sbFBlcmNlbnQsXG4gICAgICAgICAgJ2Rpc2NvdmVyeVNjcm9sbERlcHRoTG9jYXRpb24nOiBjYWxsYmFja0RhdGEuZG9jdW1lbnRMb2NhdGlvblxuICAgICAgICB9XG4gICAgICAgIGFuYWx5dGljcy5wdXNoKF9vYmopO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1Njcm9sbCBkYXRhIGlzIG5vdCBmb3IgYSBkaXNjb3ZlcmllcyBwYWdlLicpO1xuICAgICAgfVxuXHRcdH1cblxuICAgIC8qKlxuICAgICogSW5pdCB0aGUgYmFtUGVyY2VudFBhZ2VWaWV3ZWQgcGx1Z2luXG4gICAgKi9cbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbz1vbmxvYWQsIG49ZnVuY3Rpb24oKSB7XG4gICAgICAgIGJhbVBlcmNlbnRQYWdlVmlld2VkLmluaXQoe1xuICAgICAgICAgIHRyYWNrRGVsYXkgOiAnMjAwMCcsXG4gICAgICAgICAgcGVyY2VudEludGVydmFsIDogJzEwJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgbyE9J2Z1bmN0aW9uJyl7b25sb2FkPW59IGVsc2UgeyBvbmxvYWQ9ZnVuY3Rpb24oKXsgbigpO28oKTt9fVxuICAgIH0pKHdpbmRvdyk7XG5cbiAgICAvLyBFdmVudDogU0VEQSBkYXRhIGRvd25sb2FkXG4gICAgLy8gUmVwb3J0czogPGE+IHRhZ3Mgdy9pbiBmbGFnZ2VkIHRhYmxlcyBvbmx5XG4gICAgJCgnLmd0YS1ldmVudC1kYXRhRG93bmxvYWQgYScpLm9uKCdjbGljayB0b3VjaHN0YXJ0JywgZnVuY3Rpb24oZSkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ0RhdGEgZG93bmxvYWQgbGluayBzZWxlY3RlZC4nKTtcbiAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgICBjb25zdCAkaHJlZiA9ICR0YXJnZXQuYXR0cignaHJlZicpO1xuICAgICAgY29uc3QgJGhlYWRpbmcgPSAkdGFyZ2V0LmNsb3Nlc3QoJ3RhYmxlJykuZmluZCgndGgnKS5sZW5ndGggPT09IDEgP1xuICAgICAgICAkdGFyZ2V0LmNsb3Nlc3QoJ3RhYmxlJykuZmluZCgndGgnKS50ZXh0KCkgOlxuICAgICAgICAnTm90IGF2YWlsYWJsZSc7XG4gICAgICBjb25zdCAkdmVyc2lvbiA9ICR0YXJnZXQuY2xvc2VzdCgnLnRhYi1wYW5lLmFjdGl2ZScpLmF0dHIoJ2lkJykgP1xuICAgICAgICBTdHJpbmcoJHRhcmdldC5cbiAgICAgICAgICBjbG9zZXN0KCcudGFiLXBhbmUuYWN0aXZlJylcbiAgICAgICAgICAuYXR0cignaWQnKSlcbiAgICAgICAgICAucmVwbGFjZSgndmVyc2lvbicsICcnKVxuICAgICAgICAgIC5yZXBsYWNlKCctJywgJy4nKSA6XG4gICAgICAgICdOb3QgYXZhaWxhYmxlJztcbiAgICAgIGNvbnN0IF9vYmogPSB7XG4gICAgICAgICdldmVudCcgOiAnZGF0YURvd25sb2FkZWQnLFxuICAgICAgICAnZGF0YUZpbGUnOiAkaHJlZixcbiAgICAgICAgJ2RhdGFIZWFkaW5nJzogJGhlYWRpbmcsXG4gICAgICAgICdkYXRhVmVyc2lvbic6ICR2ZXJzaW9uXG4gICAgICB9XG4gICAgICBhbmFseXRpY3MucHVzaChfb2JqKTtcbiAgICB9KTtcblxuICAgIC8vIEV2ZW50OiBuYXZDbGlja1xuICAgIC8vIFJlcG9ydHM6IG5hdlR5cGUsIG5hdkl0ZW1cbiAgICAkKCcuZ3RhLWV2ZW50LW5hdkNsaWNrJykub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnLmd0YS1ldmVudC1uYXZDbGljaycpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgJHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgIGNvbnN0ICRocmVmID0gJHRhcmdldC5hdHRyKCdocmVmJyk7XG4gICAgICBjb25zdCAkdGFyZ2V0QmxhbmsgPSAoJHRhcmdldC5hdHRyKCd0YXJnZXQnKSA9PT0gJ19ibGFuaycpO1xuICAgICAgbGV0ICRuYXZUeXBlID0gbnVsbDtcbiAgICAgIGlmICgkdGFyZ2V0LmNsb3Nlc3QoJyNkcmF3ZXInKS5sZW5ndGggPj0gMSkge1xuICAgICAgICAkbmF2VHlwZSA9ICdtYWluJztcbiAgICAgIH1cbiAgICAgIGlmICgkdGFyZ2V0LmNsb3Nlc3QoJ2Zvb3RlcicpLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICRuYXZUeXBlID0gJ2Zvb3Rlcic7XG4gICAgICB9XG4gICAgICBsZXQgJG5hdkl0ZW0gPSAkdGFyZ2V0LnRleHQoKS50cmltKCk7XG4gICAgICBpZiAoJG5hdkl0ZW0ubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgJG5hdkl0ZW0gPSAkdGFyZ2V0LmF0dHIoJ2hyZWYnKTtcbiAgICAgIH1cbiAgICAgIGlmICgkbmF2SXRlbS5sZW5ndGggPD0gMCkge1xuICAgICAgICAkbmF2SXRlbSA9ICR0YXJnZXQuZmluZCgnc3BhbiwgaDEnKVswXS50ZXh0KCkudHJpbSgpO1xuICAgICAgfVxuICAgICAgLy8gY29uc29sZS5sb2coJG5hdlR5cGUpO1xuICAgICAgLy8gY29uc29sZS5sb2coJG5hdkl0ZW0pO1xuICAgICAgY29uc3QgX29iaiA9IHtcbiAgICAgICAgJ2V2ZW50JyA6ICduYXZDbGljaycsXG4gICAgICAgICduYXZUeXBlJzogJG5hdlR5cGUsXG4gICAgICAgICduYXZJdGVtJzogJG5hdkl0ZW0sXG4gICAgICAgICdldmVudENhbGxiYWNrJyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZXF1ZXN0IHN1Y2Nlc3NmdWwnKTtcbiAgICAgICAgICBhbmFseXRpY3MubmF2aWdhdGUoJGhyZWYsICR0YXJnZXRCbGFuayk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGFuYWx5dGljcy5wdXNoKF9vYmopO1xuICAgIH0pO1xuXG4gICAgLy8gQmFzaWMgSlMgZXJyb3IgbGlzdGVuZXJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgLy8gY29uc29sZS5sb2coJ0Vycm9yIGRldGVjdGVkIGluIGJyb3dzZXIgd2luZG93LiBTZW5kaW5nIEdBIHJlcG9ydC4nKTtcbiAgICAgIGNvbnN0IF9vYmogPSB7XG4gICAgICAgICdldmVudCcgOiAnZXJyb3InLFxuICAgICAgICAnZXJyb3JNZXNzYWdlJzogJ0Vycm9yIG9yaWdpbmF0aW5nIGZyb20gJyArIGVycm9yLmZpbGVuYW1lICtcbiAgICAgICAgICAgICAgICAgICAgICAgICcgYXQgbGluZSAnICsgZXJyb3IubGluZW5vICsgJywgY29sdW1uICcgKyBlcnJvci5jb2xubyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnOlxcbicgKyBlcnJvci5tZXNzYWdlXG4gICAgICB9XG4gICAgICBhbmFseXRpY3MucHVzaChfb2JqKTtcbiAgICB9KTtcbiAgfVxuICBpZiAoISFkYXRhTGF5ZXIpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnZGF0YUxheWVyIGZvdW5kJyk7XG4gICAgY29uc3Qgd2FpdFRpbWUgPSAoJCgnYm9keS50eXBlLWRpc2NvdmVyaWVzJykubGVuZ3RoKSA+PSAxID8gMzAwMCA6IDE2MDA7XG4gICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoZGF0YUxheWVyLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgIGFuYWx5dGljcy5pbml0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnVGhlIEdUTSBkYXRhTGF5ZXIgY2Fubm90IGJlIGZvdW5kLi4uIFNraXBwaW5nIGFuYWx5dGljcyBsaXN0ZW5lcnMuJyk7XG4gICAgICB9XG4gICAgfSwgd2FpdFRpbWUpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKCdFcnJvciEgVGhlIEdUTSBkYXRhTGF5ZXIgY2Fubm90IGJlIGZvdW5kLi4uIFNraXBwaW5nIGFuYWx5dGljcyBsaXN0ZW5lcnMuJyk7XG4gIH1cbn0pKGpRdWVyeSk7XG4iXX0=