"use strict";/**
 * Analytics listeners
 */(function(a){// console.log('Loading Analytics listeners');
var b={};if(b.push=function(a){dataLayer.push(a)},b.navigate=function(a,b){b?window.open(a,"_blank"):window.location.href=a},b.init=function(){a(".gta-event-CTAClick").on("click touchstart",function(c){c.preventDefault();var d=a(c.currentTarget).attr("href"),e="_blank"===a(c.currentTarget).attr("target"),f=a(c.currentTarget).attr("aria-label")?a(c.currentTarget).attr("aria-label"):a(c.currentTarget).find("span").html(),g={event:"CTAClick",CTADestination:encodeURI(d),CTAPrompt:f,eventCallback:function eventCallback(){b.navigate(d,e)}};b.push(g)}),a(".gta-event-DiscoveriesCTAClick").on("click touchstart",function(c){c.preventDefault();var d=a(c.currentTarget).attr("href"),e="_blank"===a(c.currentTarget).attr("target"),f=a(c.currentTarget).attr("aria-label")?a(c.currentTarget).attr("aria-label"):a(c.currentTarget).text(),g={event:"DiscoveriesCTAClick",CTADestination:encodeURI(d),CTAPrompt:f,eventCallback:function eventCallback(){b.navigate(d,e)}};b.push(g)}),a(".gta-event-bioExpanded").on("click touchstart",function(c){// console.log('.gta-event-bioExpanded');
var d=a(c.currentTarget);// console.log($target);
b.push({event:"bioExpanded"})}),a(".gta-event-eMailSignupAttempt").on("click touchstart",function(){// console.log('.gta-event-eMailSignupAttempt');
b.push({event:"eMailSignupAttempt"})}),a(".gta-event-postSelected").on("click touchstart",function(c){c.preventDefault();var d=a(c.currentTarget).attr("href"),e={event:"postSelected",discoverySelection:encodeURI(d),eventCallback:function eventCallback(){window.location.href=d}};b.push(e)}),a(".gta-event-showAbstractandVersion").on("click touchstart",function(c){// console.log('.gta-event-showAbstractandVersion');
var d=a(c.currentTarget),e=null,f=d.closest(".research-paper").hasClass("abstract-visible");if(f){e=a(".row.subnav.small-tab-nav").is(":visible")?a(".row.subnav.small-tab-nav").find("ul.anchor-links li a.active").text():a(".row.subnav.large-tab-nav").find("#researchTabs li a.active").text();// console.log('$paperCategory: ' + $paperCategory);
var g=null;g=a(c.currentTarget).closest(".research-paper").find(".info h5").text();// console.log($paperName);
var h={event:"showAbstractandVersion",paperCategory:e?e:"Unavailable",paperName:g?g:"Unavailable"};b.push(h)}}),a(".gta-event-categorySelected").on("click touchstart",function(c){// console.log('.gta-event-categorySelected');
var d=a(c.currentTarget),e=d.text(),f={event:"categorySelected",paperCategory:e?e:"Unavailable"};b.push(f)}),a(".gta-event-paperDownloadbyVersion").on("click touchstart",function(c){// console.log('.gta-event-paperDownloadbyVersion');
// e.preventDefault();
var d=a(c.currentTarget),e=null;e=a(c.currentTarget).closest(".research-paper").find(".info h5").text();// console.log($paperName);
var f=d.attr("data-date"),g={event:"paperDownloadbyVersion",paperVersion:f,paperName:e};// console.log($paperVersion);
b.push(g)}),a(".gta-event-paperDownloadLatest").on("click touchstart",function(c){// console.log('.gta-event-paperDownloadLatest');
var d=a(c.currentTarget),e=d.closest(".research-paper").find(".info h5").text(),f=d.attr("data-date");b.push({event:"paperDownloadLatest",paperVersion:f,paperName:e})}),a(".gta-event-articleSelected").on("click touchstart",function(c){c.preventDefault();var d=a(c.currentTarget).attr("href"),e=a(c.currentTarget).closest(".row.news-item").find("h4 a"),f=e.text(),g=e.attr("data-outlet"),h="_blank"===a(c.currentTarget).attr("target");b.push({event:"articleSelected",newsArticleName:f,newsArticlePublication:g,eventCallback:function eventCallback(){b.navigate(d,h)}})}),a(".gta-event-faqTopicExpanded").on("click touchstart",function(c){// console.log('.gta-event-faqTopicExpanded');
var d=a(c.currentTarget),e=a(c.currentTarget).find("h5").text();b.push({event:"faqTopicExpanded",faqTopExpansion:e})});/**
     * Manual callback handler, discoveries article scroll depth
     * false == no scroll to track from previous page
     */var c=bamPercentPageViewed.callback();if(!1!==c)// console.group('Callback');
// console.log(callbackData);
// console.groupEnd();
// If the data is from a discoveries page, then send.
if(-1<c.documentLocation.indexOf("discoveries")){console.log("Discoveries page. Pushing to GA.");var d={event:"discoveryScrollDepthSave",discoveryScrollDepth:c.scrollPercent,discoveryScrollDepthLocation:c.documentLocation};b.push(d)}else;/**
    * Init the bamPercentPageViewed plugin
    */(function(){var a=onload,b=function(){bamPercentPageViewed.init({trackDelay:"2000",percentInterval:"10"})};onload="function"==typeof a?function onload(){b(),a()}:b})(window),a(".gta-event-dataDownload a").on("click touchstart",function(c){// console.log('Data download link selected.');
var d=a(c.currentTarget),e=d.attr("href"),f=1===d.closest("table").find("th").length?d.closest("table").find("th").text():"Not available",g=d.closest(".tab-pane.active").attr("id")?(d.closest(".tab-pane.active").attr("id")+"").replace("version","").replace("-","."):"Not available";b.push({event:"dataDownloaded",dataFile:e,dataHeading:f,dataVersion:g})}),a(".gta-event-navClick").on("click touchstart",function(c){c.preventDefault();var d=a(c.currentTarget),e=d.attr("href"),f="_blank"===d.attr("target"),g=null;1<=d.closest("#drawer").length&&(g="main"),1<=d.closest("footer").length&&(g="footer");var h=d.text().trim();0>=h.length&&(h=d.attr("href")),0>=h.length&&(h=d.find("span, h1")[0].text().trim());// console.log($navType);
// console.log($navItem);
var i={event:"navClick",navType:g,navItem:h,eventCallback:function eventCallback(){b.navigate(e,f)}};b.push(i)}),window.addEventListener("error",function(a){// console.log('Error detected in browser window. Sending GA report.');
var c={event:"error",errorMessage:"Error originating from "+a.filename+" at line "+a.lineno+", column "+a.colno+":\n"+a.message};b.push(c)})},!!dataLayer)// console.log('dataLayer found');
var c=1<=a("body.type-discoveries").length?3e3:1600,d=setTimeout(function(){3<=dataLayer.length?b.init():console.log("The GTM dataLayer cannot be found... Skipping analytics listeners.")},c);else console.log("Error! The GTM dataLayer cannot be found... Skipping analytics listeners.")})(jQuery);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9hbmFseXRpY3MuanMiXSwibmFtZXMiOlsiJCIsImFuYWx5dGljcyIsInB1c2giLCJkYXRhIiwiZGF0YUxheWVyIiwibmF2aWdhdGUiLCJ0YXJnZXQiLCJibGFuayIsIndpbmRvdyIsIm9wZW4iLCJsb2NhdGlvbiIsImhyZWYiLCJpbml0Iiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCIkdGFyZ2V0IiwiY3VycmVudFRhcmdldCIsImF0dHIiLCIkdGFyZ2V0QmxhbmsiLCIkdGFyZ2V0UHJvbXB0IiwiZmluZCIsImh0bWwiLCJfb2JqIiwiZW5jb2RlVVJJIiwidGV4dCIsIiRwYXBlckNhdGVnb3J5IiwiJGFic3RyYWN0VmlzaWJsZSIsImNsb3Nlc3QiLCJoYXNDbGFzcyIsImlzIiwiJHBhcGVyTmFtZSIsIiRwYXBlclZlcnNpb24iLCIkdGl0bGVOb2RlIiwiJG5ld3NBcnRpY2xlTmFtZSIsIiRuZXdzQXJ0aWNsZVB1YmxpY2F0aW9uIiwiJHRvcGljIiwiY2FsbGJhY2tEYXRhIiwiYmFtUGVyY2VudFBhZ2VWaWV3ZWQiLCJjYWxsYmFjayIsImRvY3VtZW50TG9jYXRpb24iLCJpbmRleE9mIiwiY29uc29sZSIsImxvZyIsInNjcm9sbFBlcmNlbnQiLCJvIiwib25sb2FkIiwibiIsInRyYWNrRGVsYXkiLCJwZXJjZW50SW50ZXJ2YWwiLCIkaHJlZiIsIiRoZWFkaW5nIiwibGVuZ3RoIiwiJHZlcnNpb24iLCJyZXBsYWNlIiwiJG5hdlR5cGUiLCIkbmF2SXRlbSIsInRyaW0iLCJhZGRFdmVudExpc3RlbmVyIiwiZXJyb3IiLCJmaWxlbmFtZSIsImxpbmVubyIsImNvbG5vIiwibWVzc2FnZSIsIndhaXRUaW1lIiwidGltZW91dCIsInNldFRpbWVvdXQiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJhQUFBOztHQUdBLENBQUMsU0FBU0EsQ0FBVCxDQUFZLENBQ1g7QUFDQSxHQUFNQyxDQUFBQSxDQUFTLENBQUcsRUFBbEIsQ0FzVEEsR0FyVEFBLENBQVMs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LFdBRDdCLENBQzJDRixDQUFLLENBQUNHLEtBRGpELENBRUEsS0FGQSxDQUVRSCxDQUFLLENBQUNJLE9BSm5CLENBQWIsQ0FNQTlELENBQVMsQ0FBQ0MsSUFBVixDQUFlcUIsQ0FBZixDQUNELENBVEQsQ0FVRCxDQUNELENBQUksQ0FBQyxDQUFDbkIsU0FBTixDQUNFO0FBREYsR0FFUTRELENBQUFBLENBQVEsQ0FBMEMsQ0FBdkMsRUFBQ2hFLENBQUMsQ0FBQyx1QkFBRCxDQUFELENBQTJCb0QsTUFBNUIsQ0FBMkMsR0FBM0MsQ0FBa0QsSUFGckUsQ0FHUWEsQ0FBTyxDQUFHQyxVQUFVLENBQUMsVUFBVyxDQUNaLENBQXBCLEVBQUE5RCxTQUFTLENBQUNnRCxNQURzQixDQUVsQ25ELENBQVMsQ0FBQ1csSUFBVixFQUZrQyxDQUlsQzhCLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLG9FQUFaLENBRUgsQ0FOeUIsQ0FNdkJxQixDQU51QixDQUg1QixLQVdFdEIsQ0FBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksMkVBQVosQ0FFSCxDQXJVRCxFQXFVR3dCLE1BclVILEMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFuYWx5dGljcyBsaXN0ZW5lcnNcbiAqL1xuKGZ1bmN0aW9uKCQpIHtcbiAgLy8gY29uc29sZS5sb2coJ0xvYWRpbmcgQW5hbHl0aWNzIGxpc3RlbmVycycpO1xuICBjb25zdCBhbmFseXRpY3MgPSB7fTtcbiAgYW5hbHl0aWNzLnB1c2ggPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgIC8vIGNvbnNvbGUubG9nKCdhbmFseXRpY3MucHVzaCcpO1xuICAgIGRhdGFMYXllci5wdXNoKGRhdGEpO1xuICB9XG4gIGFuYWx5dGljcy5uYXZpZ2F0ZSA9ICh0YXJnZXQsIGJsYW5rKSA9PiB7XG4gICAgaWYgKGJsYW5rKSB7XG4gICAgICB3aW5kb3cub3Blbih0YXJnZXQsICdfYmxhbmsnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB0YXJnZXQ7XG4gICAgfVxuICB9XG4gIGFuYWx5dGljcy5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIGNvbnNvbGUubG9nKCdhbmFseXRpY3MuaW5pdCcpO1xuXG4gICAgLy8gRXZlbnQ6IENUQUNsaWNrIGhvbWUgcGFnZVxuICAgICQoJy5ndGEtZXZlbnQtQ1RBQ2xpY2snKS5vbignY2xpY2sgdG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnLmd0YS1ldmVudC1DVEFDbGljaycpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgJHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdocmVmJyk7XG4gICAgICBjb25zdCAkdGFyZ2V0QmxhbmsgPSAoJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ3RhcmdldCcpID09PSAnX2JsYW5rJyk7XG4gICAgICBjb25zdCAkdGFyZ2V0UHJvbXB0ID0gJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2FyaWEtbGFiZWwnKSA/XG4gICAgICAgICQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdhcmlhLWxhYmVsJykgOlxuICAgICAgICAkKGUuY3VycmVudFRhcmdldCkuZmluZCgnc3BhbicpLmh0bWwoKTtcbiAgICAgIGNvbnN0IF9vYmogPSB7XG4gICAgICAgICdldmVudCcgOiAnQ1RBQ2xpY2snLFxuICAgICAgICAnQ1RBRGVzdGluYXRpb24nOiBlbmNvZGVVUkkoJHRhcmdldCksXG4gICAgICAgICdDVEFQcm9tcHQnOiAkdGFyZ2V0UHJvbXB0LFxuICAgICAgICAnZXZlbnRDYWxsYmFjaycgOiAoKSA9PiB7XG4gICAgICAgICAgICBhbmFseXRpY3MubmF2aWdhdGUoJHRhcmdldCwgJHRhcmdldEJsYW5rKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYW5hbHl0aWNzLnB1c2goX29iaik7XG4gICAgfSk7XG5cbiAgICAvLyBFdmVudDogQ1RBQ2xpY2sgZGlzY292ZXJpZXMgcGFnZVxuICAgICQoJy5ndGEtZXZlbnQtRGlzY292ZXJpZXNDVEFDbGljaycpLm9uKCdjbGljayB0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCcuZ3RhLWV2ZW50LURpc2NvdmVyaWVzQ1RBQ2xpY2snKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCkuYXR0cignaHJlZicpO1xuICAgICAgY29uc3QgJHRhcmdldEJsYW5rID0gKCQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCd0YXJnZXQnKSA9PT0gJ19ibGFuaycpO1xuICAgICAgY29uc3QgJHRhcmdldFByb21wdCA9ICQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdhcmlhLWxhYmVsJykgP1xuICAgICAgICAkKGUuY3VycmVudFRhcmdldCkuYXR0cignYXJpYS1sYWJlbCcpIDpcbiAgICAgICAgJChlLmN1cnJlbnRUYXJnZXQpLnRleHQoKTtcbiAgICAgIGNvbnN0IF9vYmogPSB7XG4gICAgICAgICdldmVudCcgOiAnRGlzY292ZXJpZXNDVEFDbGljaycsXG4gICAgICAgICdDVEFEZXN0aW5hdGlvbic6IGVuY29kZVVSSSgkdGFyZ2V0KSxcbiAgICAgICAgJ0NUQVByb21wdCc6ICR0YXJnZXRQcm9tcHQsXG4gICAgICAgICdldmVudENhbGxiYWNrJyA6ICgpID0+IHtcbiAgICAgICAgICAgIGFuYWx5dGljcy5uYXZpZ2F0ZSgkdGFyZ2V0LCAkdGFyZ2V0QmxhbmspO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBhbmFseXRpY3MucHVzaChfb2JqKTtcbiAgICB9KTtcblxuICAgIC8vIEV2ZW50OiBiaW9FeHBhbmRlZFxuICAgICQoJy5ndGEtZXZlbnQtYmlvRXhwYW5kZWQnKS5vbignY2xpY2sgdG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnLmd0YS1ldmVudC1iaW9FeHBhbmRlZCcpO1xuICAgICAgY29uc3QgJHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCR0YXJnZXQpO1xuICAgICAgY29uc3QgX29iaiA9IHtcbiAgICAgICAgJ2V2ZW50JyA6ICdiaW9FeHBhbmRlZCdcbiAgICAgIH1cbiAgICAgIGFuYWx5dGljcy5wdXNoKF9vYmopO1xuICAgIH0pO1xuXG4gICAgLy8gRXZlbnQ6IGVNYWlsU2lnbnVwXG4gICAgJCgnLmd0YS1ldmVudC1lTWFpbFNpZ251cEF0dGVtcHQnKS5vbignY2xpY2sgdG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnLmd0YS1ldmVudC1lTWFpbFNpZ251cEF0dGVtcHQnKTtcbiAgICAgIGNvbnN0IF9vYmogPSB7XG4gICAgICAgICdldmVudCcgOiAnZU1haWxTaWdudXBBdHRlbXB0J1xuICAgICAgfVxuICAgICAgYW5hbHl0aWNzLnB1c2goX29iaik7XG4gICAgfSk7XG5cbiAgICAvLyBFdmVudDogcG9zdFNlbGVjdGVkXG4gICAgJCgnLmd0YS1ldmVudC1wb3N0U2VsZWN0ZWQnKS5vbignY2xpY2sgdG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnLmd0YS1ldmVudC1wb3N0U2VsZWN0ZWQnKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCkuYXR0cignaHJlZicpO1xuICAgICAgY29uc3QgX29iaiA9IHtcbiAgICAgICAgJ2V2ZW50JyA6ICdwb3N0U2VsZWN0ZWQnLFxuICAgICAgICAnZGlzY292ZXJ5U2VsZWN0aW9uJzogZW5jb2RlVVJJKCR0YXJnZXQpLFxuICAgICAgICAnZXZlbnRDYWxsYmFjaycgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJHRhcmdldDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYW5hbHl0aWNzLnB1c2goX29iaik7XG4gICAgfSk7XG5cbiAgICAvLyBFdmVudDogc2hvd0Fic3RyYWN0YW5kVmVyc2lvblxuICAgIC8vIFJlcG9ydHM6IHBhcGVyQ2F0ZWdvcnksIHBhcGVyTmFtZVxuICAgICQoJy5ndGEtZXZlbnQtc2hvd0Fic3RyYWN0YW5kVmVyc2lvbicpLm9uKCdjbGljayB0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCcuZ3RhLWV2ZW50LXNob3dBYnN0cmFjdGFuZFZlcnNpb24nKTtcbiAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgICBsZXQgJHBhcGVyQ2F0ZWdvcnkgPSBudWxsO1xuICAgICAgY29uc3QgJGFic3RyYWN0VmlzaWJsZSA9ICR0YXJnZXQuY2xvc2VzdCgnLnJlc2VhcmNoLXBhcGVyJykuaGFzQ2xhc3MoJ2Fic3RyYWN0LXZpc2libGUnKTtcbiAgICAgIGlmICghJGFic3RyYWN0VmlzaWJsZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoJCgnLnJvdy5zdWJuYXYuc21hbGwtdGFiLW5hdicpLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdNb2JpbGUgdmlldycpO1xuICAgICAgICAkcGFwZXJDYXRlZ29yeSA9ICQoJy5yb3cuc3VibmF2LnNtYWxsLXRhYi1uYXYnKS5maW5kKCd1bC5hbmNob3ItbGlua3MgbGkgYS5hY3RpdmUnKS50ZXh0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkcGFwZXJDYXRlZ29yeSA9ICQoJy5yb3cuc3VibmF2LmxhcmdlLXRhYi1uYXYnKS5maW5kKCcjcmVzZWFyY2hUYWJzIGxpIGEuYWN0aXZlJykudGV4dCgpO1xuICAgICAgfVxuICAgICAgLy8gY29uc29sZS5sb2coJyRwYXBlckNhdGVnb3J5OiAnICsgJHBhcGVyQ2F0ZWdvcnkpO1xuICAgICAgbGV0ICRwYXBlck5hbWUgPSBudWxsO1xuICAgICAgJHBhcGVyTmFtZSA9ICQoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcucmVzZWFyY2gtcGFwZXInKS5maW5kKCcuaW5mbyBoNScpLnRleHQoKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCRwYXBlck5hbWUpO1xuICAgICAgY29uc3QgX29iaiA9IHtcbiAgICAgICAgJ2V2ZW50JyA6ICdzaG93QWJzdHJhY3RhbmRWZXJzaW9uJyxcbiAgICAgICAgJ3BhcGVyQ2F0ZWdvcnknOiAkcGFwZXJDYXRlZ29yeSA/ICRwYXBlckNhdGVnb3J5IDogJ1VuYXZhaWxhYmxlJyxcbiAgICAgICAgJ3BhcGVyTmFtZSc6ICRwYXBlck5hbWUgPyAkcGFwZXJOYW1lIDogJ1VuYXZhaWxhYmxlJ1xuICAgICAgfVxuICAgICAgYW5hbHl0aWNzLnB1c2goX29iaik7XG4gICAgfSk7XG5cbiAgICAvLyBFdmVudDogY2F0ZWdvcnlTZWxlY3RlZFxuICAgIC8vIFJlcG9ydHM6IHBhcGVyQ2F0ZWdvcnlcbiAgICAkKCcuZ3RhLWV2ZW50LWNhdGVnb3J5U2VsZWN0ZWQnKS5vbignY2xpY2sgdG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnLmd0YS1ldmVudC1jYXRlZ29yeVNlbGVjdGVkJyk7XG4gICAgICBjb25zdCAkdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgY29uc3QgJHBhcGVyQ2F0ZWdvcnkgPSAkdGFyZ2V0LnRleHQoKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCRwYXBlckNhdGVnb3J5KTtcbiAgICAgIGNvbnN0IF9vYmogPSB7XG4gICAgICAgICdldmVudCcgOiAnY2F0ZWdvcnlTZWxlY3RlZCcsXG4gICAgICAgICdwYXBlckNhdGVnb3J5JzogJHBhcGVyQ2F0ZWdvcnkgPyAkcGFwZXJDYXRlZ29yeSA6ICdVbmF2YWlsYWJsZSdcbiAgICAgIH1cbiAgICAgIGFuYWx5dGljcy5wdXNoKF9vYmopO1xuICAgIH0pO1xuXG4gICAgLy8gRXZlbnQ6IHBhcGVyRG93bmxvYWRieVZlcnNpb25cbiAgICAvLyBSZXBvcnRzOiBwYXBlclZlcnNpb24sIHBhcGVyTmFtZVxuICAgICQoJy5ndGEtZXZlbnQtcGFwZXJEb3dubG9hZGJ5VmVyc2lvbicpLm9uKCdjbGljayB0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCcuZ3RhLWV2ZW50LXBhcGVyRG93bmxvYWRieVZlcnNpb24nKTtcbiAgICAgIC8vIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgICBsZXQgJHBhcGVyTmFtZSA9IG51bGw7XG4gICAgICAkcGFwZXJOYW1lID0gJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJy5yZXNlYXJjaC1wYXBlcicpLmZpbmQoJy5pbmZvIGg1JykudGV4dCgpO1xuICAgICAgLy8gY29uc29sZS5sb2coJHBhcGVyTmFtZSk7XG4gICAgICBjb25zdCAkcGFwZXJWZXJzaW9uID0gJHRhcmdldC5hdHRyKCdkYXRhLWRhdGUnKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCRwYXBlclZlcnNpb24pO1xuICAgICAgY29uc3QgX29iaiA9IHtcbiAgICAgICAgJ2V2ZW50JzogJ3BhcGVyRG93bmxvYWRieVZlcnNpb24nLFxuICAgICAgICAncGFwZXJWZXJzaW9uJzogJHBhcGVyVmVyc2lvbixcbiAgICAgICAgJ3BhcGVyTmFtZSc6ICRwYXBlck5hbWVcbiAgICAgIH1cbiAgICAgIGFuYWx5dGljcy5wdXNoKF9vYmopO1xuICAgIH0pO1xuXG4gICAgLy8gRXZlbnQ6IHBhcGVyRG93bmxvYWRMYXRlc3RcbiAgICAvLyBSZXBvcnRzOiBwYXBlclZlcnNpb24sIHBhcGVyTmFtZVxuICAgICQoJy5ndGEtZXZlbnQtcGFwZXJEb3dubG9hZExhdGVzdCcpLm9uKCdjbGljayB0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCcuZ3RhLWV2ZW50LXBhcGVyRG93bmxvYWRMYXRlc3QnKTtcbiAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgICBjb25zdCAkcGFwZXJOYW1lID0gJHRhcmdldC5jbG9zZXN0KCcucmVzZWFyY2gtcGFwZXInKS5maW5kKCcuaW5mbyBoNScpLnRleHQoKTtcbiAgICAgIGNvbnN0ICRwYXBlclZlcnNpb24gPSAkdGFyZ2V0LmF0dHIoJ2RhdGEtZGF0ZScpO1xuICAgICAgY29uc3QgX29iaiA9IHtcbiAgICAgICAgJ2V2ZW50JzogJ3BhcGVyRG93bmxvYWRMYXRlc3QnLFxuICAgICAgICAncGFwZXJWZXJzaW9uJzogJHBhcGVyVmVyc2lvbixcbiAgICAgICAgJ3BhcGVyTmFtZSc6ICRwYXBlck5hbWVcbiAgICAgIH1cbiAgICAgIGFuYWx5dGljcy5wdXNoKF9vYmopO1xuICAgIH0pO1xuXG4gICAgLy8gRXZlbnQ6IGFydGljbGVTZWxlY3RlZFxuICAgIC8vIFJlcG9ydHM6IG5ld3NBcnRpY2xlTmFtZSwgbmV3c0FydGljbGVQdWJsaWNhdGlvblxuICAgICQoJy5ndGEtZXZlbnQtYXJ0aWNsZVNlbGVjdGVkJykub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnLmd0YS1ldmVudC1hcnRpY2xlU2VsZWN0ZWQnKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCkuYXR0cignaHJlZicpO1xuICAgICAgY29uc3QgJHRpdGxlTm9kZSA9ICQoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcucm93Lm5ld3MtaXRlbScpLmZpbmQoJ2g0IGEnKTtcbiAgICAgIGNvbnN0ICRuZXdzQXJ0aWNsZU5hbWUgPSAkdGl0bGVOb2RlLnRleHQoKTtcbiAgICAgIGNvbnN0ICRuZXdzQXJ0aWNsZVB1YmxpY2F0aW9uID0gJHRpdGxlTm9kZS5hdHRyKCdkYXRhLW91dGxldCcpO1xuICAgICAgY29uc3QgJHRhcmdldEJsYW5rID0gKCQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCd0YXJnZXQnKSA9PT0gJ19ibGFuaycpO1xuICAgICAgY29uc3QgX29iaiA9IHtcbiAgICAgICAgJ2V2ZW50JzogJ2FydGljbGVTZWxlY3RlZCcsXG4gICAgICAgICduZXdzQXJ0aWNsZU5hbWUnOiAkbmV3c0FydGljbGVOYW1lLFxuICAgICAgICAnbmV3c0FydGljbGVQdWJsaWNhdGlvbic6ICRuZXdzQXJ0aWNsZVB1YmxpY2F0aW9uLFxuICAgICAgICAnZXZlbnRDYWxsYmFjaycgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGFuYWx5dGljcy5uYXZpZ2F0ZSgkdGFyZ2V0LCAkdGFyZ2V0QmxhbmspO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBhbmFseXRpY3MucHVzaChfb2JqKTtcbiAgICB9KTtcblxuICAgIC8vIEV2ZW50OiBmYXFUb3BpY0V4cGFuZGVkXG4gICAgLy8gUmVwb3J0czogZmFxVG9waWNFeHBhbnNpb25cbiAgICAkKCcuZ3RhLWV2ZW50LWZhcVRvcGljRXhwYW5kZWQnKS5vbignY2xpY2sgdG91Y2hzdGFydCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCcuZ3RhLWV2ZW50LWZhcVRvcGljRXhwYW5kZWQnKTtcbiAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgICBjb25zdCAkdG9waWMgPSAkKGUuY3VycmVudFRhcmdldCkuZmluZCgnaDUnKS50ZXh0KCk7XG4gICAgICAvLyBjb25zb2xlLmxvZygnJHRvcGljIGlzICcsICR0b3BpYyk7XG4gICAgICBjb25zdCBfb2JqID0ge1xuICAgICAgICAnZXZlbnQnIDogJ2ZhcVRvcGljRXhwYW5kZWQnLFxuICAgICAgICAnZmFxVG9wRXhwYW5zaW9uJzogJHRvcGljXG4gICAgICB9XG4gICAgICBhbmFseXRpY3MucHVzaChfb2JqKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIE1hbnVhbCBjYWxsYmFjayBoYW5kbGVyLCBkaXNjb3ZlcmllcyBhcnRpY2xlIHNjcm9sbCBkZXB0aFxuICAgICAqIGZhbHNlID09IG5vIHNjcm9sbCB0byB0cmFjayBmcm9tIHByZXZpb3VzIHBhZ2VcbiAgICAgKi9cbiAgICB2YXIgY2FsbGJhY2tEYXRhID0gYmFtUGVyY2VudFBhZ2VWaWV3ZWQuY2FsbGJhY2soKTtcbiAgICBpZiAoY2FsbGJhY2tEYXRhICE9PSBmYWxzZSkge1xuICAgICAgLy8gY29uc29sZS5ncm91cCgnQ2FsbGJhY2snKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGNhbGxiYWNrRGF0YSk7XG4gICAgICAvLyBjb25zb2xlLmdyb3VwRW5kKCk7XG4gICAgICAvLyBJZiB0aGUgZGF0YSBpcyBmcm9tIGEgZGlzY292ZXJpZXMgcGFnZSwgdGhlbiBzZW5kLlxuICAgICAgaWYgKGNhbGxiYWNrRGF0YS5kb2N1bWVudExvY2F0aW9uLmluZGV4T2YoJ2Rpc2NvdmVyaWVzJykgPiAtMSkge1xuICAgICAgICBjb25zb2xlLmxvZygnRGlzY292ZXJpZXMgcGFnZS4gUHVzaGluZyB0byBHQS4nKTtcbiAgICAgICAgY29uc3QgX29iaiA9IHtcbiAgICAgICAgICAnZXZlbnQnOiAnZGlzY292ZXJ5U2Nyb2xsRGVwdGhTYXZlJyxcbiAgICAgICAgICAnZGlzY292ZXJ5U2Nyb2xsRGVwdGgnOiBjYWxsYmFja0RhdGEuc2Nyb2xsUGVyY2VudCxcbiAgICAgICAgICAnZGlzY292ZXJ5U2Nyb2xsRGVwdGhMb2NhdGlvbic6IGNhbGxiYWNrRGF0YS5kb2N1bWVudExvY2F0aW9uXG4gICAgICAgIH1cbiAgICAgICAgYW5hbHl0aWNzLnB1c2goX29iaik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnU2Nyb2xsIGRhdGEgaXMgbm90IGZvciBhIGRpc2NvdmVyaWVzIHBhZ2UuJyk7XG4gICAgICB9XG5cdFx0fVxuXG4gICAgLyoqXG4gICAgKiBJbml0IHRoZSBiYW1QZXJjZW50UGFnZVZpZXdlZCBwbHVnaW5cbiAgICAqL1xuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBvPW9ubG9hZCwgbj1mdW5jdGlvbigpIHtcbiAgICAgICAgYmFtUGVyY2VudFBhZ2VWaWV3ZWQuaW5pdCh7XG4gICAgICAgICAgdHJhY2tEZWxheSA6ICcyMDAwJyxcbiAgICAgICAgICBwZXJjZW50SW50ZXJ2YWwgOiAnMTAnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBvIT0nZnVuY3Rpb24nKXtvbmxvYWQ9bn0gZWxzZSB7IG9ubG9hZD1mdW5jdGlvbigpeyBuKCk7bygpO319XG4gICAgfSkod2luZG93KTtcblxuICAgIC8vIEV2ZW50OiBTRURBIGRhdGEgZG93bmxvYWRcbiAgICAvLyBSZXBvcnRzOiA8YT4gdGFncyB3L2luIGZsYWdnZWQgdGFibGVzIG9ubHlcbiAgICAkKCcuZ3RhLWV2ZW50LWRhdGFEb3dubG9hZCBhJykub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnRGF0YSBkb3dubG9hZCBsaW5rIHNlbGVjdGVkLicpO1xuICAgICAgY29uc3QgJHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgIGNvbnN0ICRocmVmID0gJHRhcmdldC5hdHRyKCdocmVmJyk7XG4gICAgICBjb25zdCAkaGVhZGluZyA9ICR0YXJnZXQuY2xvc2VzdCgndGFibGUnKS5maW5kKCd0aCcpLmxlbmd0aCA9PT0gMSA/XG4gICAgICAgICR0YXJnZXQuY2xvc2VzdCgndGFibGUnKS5maW5kKCd0aCcpLnRleHQoKSA6XG4gICAgICAgICdOb3QgYXZhaWxhYmxlJztcbiAgICAgIGNvbnN0ICR2ZXJzaW9uID0gJHRhcmdldC5jbG9zZXN0KCcudGFiLXBhbmUuYWN0aXZlJykuYXR0cignaWQnKSA/XG4gICAgICAgIFN0cmluZygkdGFyZ2V0LlxuICAgICAgICAgIGNsb3Nlc3QoJy50YWItcGFuZS5hY3RpdmUnKVxuICAgICAgICAgIC5hdHRyKCdpZCcpKVxuICAgICAgICAgIC5yZXBsYWNlKCd2ZXJzaW9uJywgJycpXG4gICAgICAgICAgLnJlcGxhY2UoJy0nLCAnLicpIDpcbiAgICAgICAgJ05vdCBhdmFpbGFibGUnO1xuICAgICAgY29uc3QgX29iaiA9IHtcbiAgICAgICAgJ2V2ZW50JyA6ICdkYXRhRG93bmxvYWRlZCcsXG4gICAgICAgICdkYXRhRmlsZSc6ICRocmVmLFxuICAgICAgICAnZGF0YUhlYWRpbmcnOiAkaGVhZGluZyxcbiAgICAgICAgJ2RhdGFWZXJzaW9uJzogJHZlcnNpb25cbiAgICAgIH1cbiAgICAgIGFuYWx5dGljcy5wdXNoKF9vYmopO1xuICAgIH0pO1xuXG4gICAgLy8gRXZlbnQ6IG5hdkNsaWNrXG4gICAgLy8gUmVwb3J0czogbmF2VHlwZSwgbmF2SXRlbVxuICAgICQoJy5ndGEtZXZlbnQtbmF2Q2xpY2snKS5vbignY2xpY2sgdG91Y2hzdGFydCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCcuZ3RhLWV2ZW50LW5hdkNsaWNrJyk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCAkdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgY29uc3QgJGhyZWYgPSAkdGFyZ2V0LmF0dHIoJ2hyZWYnKTtcbiAgICAgIGNvbnN0ICR0YXJnZXRCbGFuayA9ICgkdGFyZ2V0LmF0dHIoJ3RhcmdldCcpID09PSAnX2JsYW5rJyk7XG4gICAgICBsZXQgJG5hdlR5cGUgPSBudWxsO1xuICAgICAgaWYgKCR0YXJnZXQuY2xvc2VzdCgnI2RyYXdlcicpLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICRuYXZUeXBlID0gJ21haW4nO1xuICAgICAgfVxuICAgICAgaWYgKCR0YXJnZXQuY2xvc2VzdCgnZm9vdGVyJykubGVuZ3RoID49IDEpIHtcbiAgICAgICAgJG5hdlR5cGUgPSAnZm9vdGVyJztcbiAgICAgIH1cbiAgICAgIGxldCAkbmF2SXRlbSA9ICR0YXJnZXQudGV4dCgpLnRyaW0oKTtcbiAgICAgIGlmICgkbmF2SXRlbS5sZW5ndGggPD0gMCkge1xuICAgICAgICAkbmF2SXRlbSA9ICR0YXJnZXQuYXR0cignaHJlZicpO1xuICAgICAgfVxuICAgICAgaWYgKCRuYXZJdGVtLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgICRuYXZJdGVtID0gJHRhcmdldC5maW5kKCdzcGFuLCBoMScpWzBdLnRleHQoKS50cmltKCk7XG4gICAgICB9XG4gICAgICAvLyBjb25zb2xlLmxvZygkbmF2VHlwZSk7XG4gICAgICAvLyBjb25zb2xlLmxvZygkbmF2SXRlbSk7XG4gICAgICBjb25zdCBfb2JqID0ge1xuICAgICAgICAnZXZlbnQnIDogJ25hdkNsaWNrJyxcbiAgICAgICAgJ25hdlR5cGUnOiAkbmF2VHlwZSxcbiAgICAgICAgJ25hdkl0ZW0nOiAkbmF2SXRlbSxcbiAgICAgICAgJ2V2ZW50Q2FsbGJhY2snIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JlcXVlc3Qgc3VjY2Vzc2Z1bCcpO1xuICAgICAgICAgIGFuYWx5dGljcy5uYXZpZ2F0ZSgkaHJlZiwgJHRhcmdldEJsYW5rKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYW5hbHl0aWNzLnB1c2goX29iaik7XG4gICAgfSk7XG5cbiAgICAvLyBCYXNpYyBKUyBlcnJvciBsaXN0ZW5lclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnRXJyb3IgZGV0ZWN0ZWQgaW4gYnJvd3NlciB3aW5kb3cuIFNlbmRpbmcgR0EgcmVwb3J0LicpO1xuICAgICAgY29uc3QgX29iaiA9IHtcbiAgICAgICAgJ2V2ZW50JyA6ICdlcnJvcicsXG4gICAgICAgICdlcnJvck1lc3NhZ2UnOiAnRXJyb3Igb3JpZ2luYXRpbmcgZnJvbSAnICsgZXJyb3IuZmlsZW5hbWUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJyBhdCBsaW5lICcgKyBlcnJvci5saW5lbm8gKyAnLCBjb2x1bW4gJyArIGVycm9yLmNvbG5vICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc6XFxuJyArIGVycm9yLm1lc3NhZ2VcbiAgICAgIH1cbiAgICAgIGFuYWx5dGljcy5wdXNoKF9vYmopO1xuICAgIH0pO1xuICB9XG4gIGlmICghIWRhdGFMYXllcikge1xuICAgIC8vIGNvbnNvbGUubG9nKCdkYXRhTGF5ZXIgZm91bmQnKTtcbiAgICBjb25zdCB3YWl0VGltZSA9ICgkKCdib2R5LnR5cGUtZGlzY292ZXJpZXMnKS5sZW5ndGgpID49IDEgPyAzMDAwIDogMTYwMDtcbiAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGlmIChkYXRhTGF5ZXIubGVuZ3RoID49IDMpIHtcbiAgICAgICAgYW5hbHl0aWNzLmluaXQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdUaGUgR1RNIGRhdGFMYXllciBjYW5ub3QgYmUgZm91bmQuLi4gU2tpcHBpbmcgYW5hbHl0aWNzIGxpc3RlbmVycy4nKTtcbiAgICAgIH1cbiAgICB9LCB3YWl0VGltZSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coJ0Vycm9yISBUaGUgR1RNIGRhdGFMYXllciBjYW5ub3QgYmUgZm91bmQuLi4gU2tpcHBpbmcgYW5hbHl0aWNzIGxpc3RlbmVycy4nKTtcbiAgfVxufSkoalF1ZXJ5KTtcbiJdfQ==