"use strict";function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _extends(){return _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},_extends.apply(this,arguments)}/**
 * Helper class for easier scatterplot updates
 */function Scatterplot(a,b){var c=this,d=!1,e={},f=["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"],g="#547892",h={color:f,title:{textStyle:{fontWeight:"normal",color:"#fff",fontFamily:"SharpGrotesk-Medium20",textAlign:"center"},subtextStyle:{fontWeight:"normal",color:"#fff",fontFamily:"MaisonNeue-Medium",textAlign:"center"},textAlign:"center"},visualMap:{itemWidth:15,color:["#5ab1ef","#e0ffff"]},aria:{show:!0,description:"Scatterplot of student test scores"},toolbox:{iconStyle:{normal:{borderColor:f[0]}}},tooltip:{backgroundColor:"#031232",// 'rgba(3, 18, 50, 80%)',
extraCssText:"box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5)",padding:[6,10],textStyle:{color:"#fff",// '#dc69aa',
fontWeight:"500",fontFamily:"SharpGrotesk-Medium20",rich:{span:{fontFamily:"SharpGrotesk-Medium20"},small:{fontFamily:"MaisonNeue-Medium",fontSize:6}}},axisPointer:{type:"line",lineStyle:{color:"#008acd"},crossStyle:{color:"#008acd"},shadowStyle:{color:"rgba(200,200,200,0.2)"}}},grid:{top:10,bottom:32,left:10,right:32,// width: 'auto',
// height: 'auto',
containLabel:!0},valueAxis:{axisLine:{lineStyle:{color:"#fff"// '#008acd'
}},splitArea:{show:!1},splitLine:{show:!1},nameTextStyle:{// Styles for x and y axis labels
color:"#fff",fontSize:12,fontWeight:"normal",fontFamily:"SharpGrotesk-Medium20"// 'MaisonNeue-Medium'
},nameLocation:"middle",nameGap:32,axisLabel:{// Styles for grid numbers
inside:!1,textVerticalAlign:"middle",color:g,// '#fff',
fontFamily:"MaisonNeue-Medium",fontSize:12}},line:{smooth:!0,symbol:"emptyCircle",symbolSize:3},scatter:{symbol:"circle",//color: 'rgba(148, 228, 254, 0.8)',
//color: 'rgba(255, 255, 255, 0.8)',
//color: 'rgba(171, 217, 233, 0.8)',
color:"rgba(202,235,190, 0.77)",itemStyle:{borderWidth:.25,borderColor:"rgba(106, 145, 185, 0.8)",borderType:"solid",opacity:1// borderOpacity: 0,
}},graph:{color:f}};/**
   * Triggers an event with `eventName` and runs all handlers
   */ /**
   * Registers an event handler with the associated eventName
   * If it's a ready handler and everything is ready, run immediately.
   */ /**
   * Set a state generator for the scatterplot
   */ /**
   * Load a state for the scatterplot
   */ /**
   * Get an existing state for the scatterplot
   */ /**
   * Set an object of props for the react component
   */ /**
   * Render the component with props
   */this.states={// default state shared by all scatterplots
// https://ecomfe.github.io/echarts-doc/public/en/option.html
base:{options:{title:{show:!1,textStyle:{fontWeight:"normal",color:"#fff",fontFamily:"SharpGrotesk-Medium20",textAlign:"center"},subtextStyle:{fontWeight:"normal",color:"#fff",fontFamily:"MaisonNeue-Medium",textAlign:"center"},textAlign:"center"},grid:{top:10,bottom:26,left:10,right:26,zlevel:100,height:"auto",// 280,
width:"auto",// 'auto',
containLabel:!0},yAxis:{position:"right",splitLine:{show:!1},nameGap:26,nameTextStyle:{fontFamily:"MaisonNeue-Medium",color:g,fontWeight:"normal",fontSize:13},zlevel:101},xAxis:{nameGap:26,nameTextStyle:{fontFamily:"MaisonNeue-Medium",color:g,fontSize:13,fontWeight:"normal",verticalAlign:"bottom"},zlevel:102},tooltip:{trigger:"item",transitionDuration:.6,showDelay:50,hideDelay:0,// borderColor: '#fff',
formatter:function formatter(a){// console.log(item);
var b=c.data[c.props.prefix],d=null;if(!!a&&!!a.value&&!!a.value[3]){var e=b&&b.name&&b.name[a.value[3]]?b.name[a.value[3]]:"Unavailable";// itemValue = item.value[3] ? item.value[3] : item.name;
d="<span>"+e+"</span><br><small>X: "+a.value[0]+"&nbsp;&nbsp;&nbsp;&nbsp;Y: "+a.value[1]+"</small>"}else// console.log(item);
// Send back a different string for the markarea tooltip.
d="<span>"+a.data.name+"</span><br>";return d}}}}},this.props=_extends(b||{},{prefix:"districts",options:this.states.base.options,endpoint:"https://d2fypeb6f974r1.cloudfront.net/dev/scatterplot/",metaVars:{counties:["id","name","lat","lon","all_sz"],districts:["id","name","lat","lon","all_sz"],schools:["id","name","lat","lon","all_sz"]},data:{},ref:function ref(a){c.component=a},onReady:function onReady(){d=!0,c.trigger("ready",[c])},onData:function onData(a,b){var d=c.data&&c.data[b]||{},e={};e[b]=_extends(d,a),c.data=_extends(c.data||{},e),c.setProps({data:c.data})},theme:h}),this.trigger=function(a,b){e[a]&&e[a].forEach(function(a){a.apply(null,b)})},this.on=function(a,b){e[a]?e[a].push(b):e[a]=[b],"ready"===a&&d&&b(c.component,c.component.echart)},this.addState=function(a,b){this.states[a]=b},this.loadState=function(a,b){b=b||{};// this.component.echart.setOption(this.getState(stateName), options)
var c=this.getState(a);b.hasOwnProperty("notMerge")&&(c.notMerge=b.notMerge),this.setProps(c)},this.getState=function(a){if(this.states.hasOwnProperty(a)){if("function"==typeof this.states[a])return this.states[a](this);if("object"===_typeof(this.states[a]))return this.states[a]}else throw new Error("no state found for "+a)},this.getScatterplotSeries=function(){},this.getDataSeries=function(){var a=this.component.getOption();return a.series&&a.series.length?a.series.find(function(a){return"base"===a.id}):null},this.setProps=function(a){this.props=_extends(this.props,a),this.render()},this.render=function(){// render the component
ReactDOM.render(// React.createElement(sedaScatterplot, this.props, null),
// container
React.createElement(sedaScatterplot,_extends({},this.props),null),a)},this.render()}/**
 * Returns an array with the IDs that correspond to
 * the largest `num` values.
 */ /**
 * Returns an array with the IDs that correspond to
 * the largest `num` values.
 */ /** Returns an array of values that fall within the range on the provided axis */ /**
 * Returns the value rounded to the provided number of decimal
 * places.
 */ /**
 * Returns a percent string from the provided value
 * @param {number} v
 */ /**
 * Returns a percent string of how far the provided value
 * is from the provided `from` value. (used for learning rates)
 * @param {number} v the value to format
 * @param {number} from the point of reference to determine what the % diff is
 */Scatterplot.prototype.getSeriesDataBySize=function(a,b){b=b||100;var c=a.sort(function(c,a){return a[2]-c[2]});return c.slice(0,b)},Scatterplot.prototype.getSeriesDataForIds=function(a,b){return b.map(function(b){return a.find(function(a){return a[3]===b})}).filter(function(a){return a})},Scatterplot.prototype.getSeriesDataInRange=function(a,b,c){var d="x"===b?0:"y"===b?1:2;return a.filter(function(a){return a[d]>c.min&&a[d]<c.max})},Scatterplot.prototype.formatTooltip=function(a,b,c,d,e,f){e=e||0,f=f||0;// console.log(item);
// console.log(data);
var g=null;if(!!a&&!!a.value&&!!a.value[3]){var h=b&&b.districts&&b.districts.name&&b.districts.name[a.value[3]]?b.districts.name[a.value[3]]:"Unavailable",i=(c+d+(a.value[0]+"")+(a.value[1]+"")).length,j=e?this.getPercentDiffLabel(a.value[0]):a.value[0],k=f?this.getPercentDiffLabel(a.value[1]):a.value[1],l=i>h.length?"<br>":"&nbsp;&nbsp;";g="<span>"+h+"</span><br><small>"+c+": "+j+l+d+": "+k+"</small>"}else// console.log(item);
// Send back a different string for the markarea tooltip.
g="<span>"+a.data.name+"</span><br>";return g},Scatterplot.prototype.formatNumber=function(a,b){var c=Math.round,d=Math.pow;if(b=b||2,!a&&0!==a)return"N/A";var e=d(10,b);return c(a*e)/e},Scatterplot.prototype.formatPercent=function(a,b){return b=b||0,a||0===a?this.formatNumber(100*a,b):"N/A"},Scatterplot.prototype.formatPercentDiff=function(a,b,c){return c=c||0,b=b||1,a||0===a?this.formatPercent(a-b,c):"N/A"},Scatterplot.prototype.getPercentDiffLabel=function(a){// console.log('Scatterplot.getPercentDiffLabel()');
// console.log(item);
return this.formatPercentDiff(a,1,0)+"%"};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zY2F0dGVycGxvdC9TY2F0dGVycGxvdC5qcyJdLCJuYW1lcyI6WyJTY2F0dGVycGxvdCIsImNvbnRhaW5lciIsInByb3BzIiwiX3NlbGYiLCJfcmVhZHkiLCJfaGFuZGxlcnMiLCJjb2xvclBhbGV0dGUiLCJheGlzQmx1ZSIsInRoZW1lIiwiY29sb3IiLCJ0aXRsZSIsInRleHRTdHlsZSIsImZvbnRXZWlnaHQiLCJmb250RmFtaWx5IiwidGV4dEFsaWduIiwic3VidGV4dFN0eWxlIiwidmlzdWFsTWFwIiwiaXRlbVdpZHRoIiwiYXJpYSIsInNob3ciLCJkZXNjcmlwdGlvbiIsInRvb2xib3giLCJpY29uU3R5bGUiLCJub3JtYWwiLCJib3JkZXJDb2xvciIsInRvb2x0aXAiLCJiYWNrZ3JvdW5kQ29sb3IiLCJleHRyYUNzc1RleHQiLCJwYWRkaW5nIiwicmljaCIsInNwYW4iLCJzbWFsbCIsImZvbnRTaXplIiwiYXhpc1BvaW50ZXIiLCJ0eXBlIiwibGluZVN0eWxlIiwiY3Jvc3NTdHlsZSIsInNoYWRvd1N0eWxlIiwiZ3JpZCIsInRvcCIsImJvdHRvbSIsImxlZnQiLCJyaWdodCIsImNvbnRhaW5MYWJlbCIsInZhbHVlQXhpcyIsImF4aXNMaW5lIiwic3BsaXRBcmVhIiwic3BsaXRMaW5lIiwibmFtZVRleHRTdHlsZSIsIm5hbWVMb2NhdGlvbiIsIm5hbWVHYXAiLCJheGlzTGFiZWwiLCJpbnNpZGUiLCJ0ZXh0VmVydGljYWxBbGlnbiIsImxpbmUiLCJzbW9vdGgiLCJzeW1ib2wiLCJzeW1ib2xTaXplIiwic2NhdHRlciIsIml0ZW1TdHlsZSIsImJvcmRlcldpZHRoIiwiYm9yZGVyVHlwZSIsIm9wYWNpdHkiLCJncmFwaCIsInN0YXRlcyIsImJhc2UiLCJvcHRpb25zIiwiemxldmVsIiwiaGVpZ2h0Iiwid2lkdGgiLCJ5QXhpcyIsInBvc2l0aW9uIiwieEF4aXMiLCJ2ZXJ0aWNhbEFsaWduIiwidHJpZ2dlciIsInRyYW5zaXRpb25EdXJhdGlvbiIsInNob3dEZWxheSIsImhpZGVEZWxheSIsImZvcm1hdHRlciIsIml0ZW0iLCJkYXRhIiwicHJlZml4IiwicmV0dXJuU3RyaW5nIiwidmFsdWUiLCJpdGVtTmFtZSIsIm5hbWUiLCJlbmRwb2ludCIsIm1ldGFWYXJzIiwicmVmIiwiY29tcG9uZW50Iiwib25SZWFkeSIsIm9uRGF0YSIsInJlZ2lvbiIsImN1cnJEYXRhIiwibmV3RGF0YSIsInNldFByb3BzIiwiZXZlbnROYW1lIiwiZm9yRWFjaCIsImgiLCJhcHBseSIsIm9uIiwiaGFuZGxlciIsInB1c2giLCJlY2hhcnQiLCJhZGRTdGF0ZSIsInN0YXRlTmFtZSIsInN0YXRlIiwibG9hZFN0YXRlIiwibmV3U3RhdGUiLCJnZXRTdGF0ZSIsImhhc093blByb3BlcnR5Iiwibm90TWVyZ2UiLCJFcnJvciIsImdldFNjYXR0ZXJwbG90U2VyaWVzIiwiZ2V0RGF0YVNlcmllcyIsImdldE9wdGlvbiIsInNlcmllcyIsImxlbmd0aCIsImZpbmQiLCJzIiwiaWQiLCJyZW5kZXIiLCJSZWFjdERPTSIsIlJlYWN0IiwiY3JlYXRlRWxlbWVudCIsInNlZGFTY2F0dGVycGxvdCIsInByb3RvdHlwZSIsImdldFNlcmllc0RhdGFCeVNpemUiLCJ2YWx1ZXMiLCJudW0iLCJzb3J0ZWQiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsImdldFNlcmllc0RhdGFGb3JJZHMiLCJpZHMiLCJtYXAiLCJ2IiwiZmlsdGVyIiwiZ2V0U2VyaWVzRGF0YUluUmFuZ2UiLCJheGlzIiwicmFuZ2UiLCJpbmRleCIsIm1pbiIsIm1heCIsImZvcm1hdFRvb2x0aXAiLCJ4TGFiZWwiLCJ5TGFiZWwiLCJ4UGVyY2VudCIsInlQZXJjZW50IiwiZGlzdHJpY3RzIiwidGVzdExlbmd0aCIsIl94X3ZhbCIsImdldFBlcmNlbnREaWZmTGFiZWwiLCJfeV92YWwiLCJsaW5lQnJlYWsiLCJmb3JtYXROdW1iZXIiLCJ2YWwiLCJkZWNpbWFscyIsIk1hdGgiLCJyb3VuZCIsInBvdyIsImZhY3RvciIs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LEVBQVMsRUFBVCxDQUFhSixDQUFiLENBQWYsQ0FDQSxNQUFPLEdBQVdELENBQUcsQ0FBQ0ssQ0FBZixFQUF1QkEsQ0FDL0IsQyxDQUtEbkssV0FBVyxDQUFDOEgsU0FBWixDQUFzQnNDLGFBQXRCLENBQXNDLFNBQVMxQixDQUFULENBQVlxQixDQUFaLENBQXNCLE9BQzFEQSxDQUFBQSxDQUFRLENBQUdBLENBQVEsRUFBSSxDQURtQyxDQUVyRHJCLENBQUQsRUFBWSxDQUFOLEdBQUFBLENBRmdELENBR25ELEtBQUttQixZQUFMLENBQXNCLEdBQUosQ0FBQW5CLENBQWxCLENBQTJCcUIsQ0FBM0IsQ0FIbUQsQ0FFOUIsS0FFN0IsQyxDQU9EL0osV0FBVyxDQUFDOEgsU0FBWixDQUFzQnVDLGlCQUF0QixDQUEwQyxTQUFTM0IsQ0FBVCxDQUFZNEIsQ0FBWixDQUFrQlAsQ0FBbEIsQ0FBNEIsT0FDcEVBLENBQUFBLENBQVEsQ0FBR0EsQ0FBUSxFQUFJLENBRDZDLENBRXBFTyxDQUFJLENBQUdBLENBQUksRUFBSSxDQUZxRCxDQUcvRDVCLENBQUQsRUFBWSxDQUFOLEdBQUFBLENBSDBELENBSTdELEtBQUswQixhQUFMLENBQW1CMUIsQ0FBQyxDQUFHNEIsQ0FBdkIsQ0FBNkJQLENBQTdCLENBSjZELENBR3hDLEtBRTdCLEMsQ0FFRC9KLFdBQVcsQ0FBQzhILFNBQVosQ0FBc0I0QixtQkFBdEIsQ0FBNEMsU0FBUzNFLENBQVQsQ0FBZSxDQUN6RDtBQUNBO0FBQ0EsTUFBTyxNQUFLc0YsaUJBQUwsQ0FBdUJ0RixDQUF2QixDQUE2QixDQUE3QixDQUFnQyxDQUFoQyxFQUFxQyxHQUM3QyxDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBIZWxwZXIgY2xhc3MgZm9yIGVhc2llciBzY2F0dGVycGxvdCB1cGRhdGVzXG4gKi9cbmZ1bmN0aW9uIFNjYXR0ZXJwbG90KGNvbnRhaW5lciwgcHJvcHMpIHtcblxuICB2YXIgX3NlbGYgPSB0aGlzO1xuICB2YXIgX3JlYWR5ID0gZmFsc2U7XG4gIHZhciBfaGFuZGxlcnMgPSB7fTtcblxuICB2YXIgY29sb3JQYWxldHRlID0gW1xuICAgICcjMmVjN2M5JywgJyNiNmEyZGUnLCAnIzVhYjFlZicsICcjZmZiOTgwJywgJyNkODdhODAnLFxuICAgICcjOGQ5OGIzJywgJyNlNWNmMGQnLCAnIzk3YjU1MicsICcjOTU3MDZkJywgJyNkYzY5YWEnLFxuICAgICcjMDdhMmE0JywgJyM5YTdmZDEnLCAnIzU4OGRkNScsICcjZjU5OTRlJywgJyNjMDUwNTAnLFxuICAgICcjNTk2NzhjJywgJyNjOWFiMDAnLCAnIzdlYjAwYScsICcjNmY1NTUzJywgJyNjMTQwODknXG4gIF07XG5cbiAgdmFyIGF4aXNCbHVlID0gJyM1NDc4OTInO1xuXG4gIHZhciB0aGVtZSA9IHtcbiAgICBjb2xvcjogY29sb3JQYWxldHRlLFxuICAgIHRpdGxlOiB7XG4gICAgICB0ZXh0U3R5bGU6IHtcbiAgICAgICAgZm9udFdlaWdodDogJ25vcm1hbCcsXG4gICAgICAgIGNvbG9yOiAnI2ZmZicsXG4gICAgICAgIGZvbnRGYW1pbHk6ICdTaGFycEdyb3Rlc2stTWVkaXVtMjAnLFxuICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInXG4gICAgICB9LFxuICAgICAgc3VidGV4dFN0eWxlOiB7XG4gICAgICAgIGZvbnRXZWlnaHQ6ICdub3JtYWwnLFxuICAgICAgICBjb2xvcjogJyNmZmYnLFxuICAgICAgICBmb250RmFtaWx5OiAnTWFpc29uTmV1ZS1NZWRpdW0nLFxuICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInXG4gICAgICB9LFxuICAgICAgdGV4dEFsaWduOiAnY2VudGVyJ1xuICAgIH0sXG4gICAgdmlzdWFsTWFwOiB7XG4gICAgICBpdGVtV2lkdGg6IDE1LFxuICAgICAgY29sb3I6IFsnIzVhYjFlZicsICcjZTBmZmZmJ11cbiAgICB9LFxuICAgIGFyaWE6IHtcbiAgICAgIHNob3c6IHRydWUsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NjYXR0ZXJwbG90IG9mIHN0dWRlbnQgdGVzdCBzY29yZXMnXG4gICAgfSxcbiAgICB0b29sYm94OiB7XG4gICAgICBpY29uU3R5bGU6IHtcbiAgICAgICAgbm9ybWFsOiB7XG4gICAgICAgICAgYm9yZGVyQ29sb3I6IGNvbG9yUGFsZXR0ZVswXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB0b29sdGlwOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMDMxMjMyJywgLy8gJ3JnYmEoMywgMTgsIDUwLCA4MCUpJyxcbiAgICAgIGV4dHJhQ3NzVGV4dDogJ2JveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuNSknLFxuICAgICAgcGFkZGluZzogWzYsIDEwXSxcbiAgICAgIHRleHRTdHlsZToge1xuICAgICAgICBjb2xvcjogJyNmZmYnLCAvLyAnI2RjNjlhYScsXG4gICAgICAgIGZvbnRXZWlnaHQ6ICc1MDAnLFxuICAgICAgICBmb250RmFtaWx5OiAnU2hhcnBHcm90ZXNrLU1lZGl1bTIwJyxcbiAgICAgICAgcmljaDoge1xuICAgICAgICAgIHNwYW46IHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdTaGFycEdyb3Rlc2stTWVkaXVtMjAnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc21hbGw6IHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdNYWlzb25OZXVlLU1lZGl1bScsXG4gICAgICAgICAgICBmb250U2l6ZTogNlxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBheGlzUG9pbnRlcjoge1xuICAgICAgICB0eXBlOiAnbGluZScsXG4gICAgICAgIGxpbmVTdHlsZToge1xuICAgICAgICAgIGNvbG9yOiAnIzAwOGFjZCdcbiAgICAgICAgfSxcbiAgICAgICAgY3Jvc3NTdHlsZToge1xuICAgICAgICAgIGNvbG9yOiAnIzAwOGFjZCdcbiAgICAgICAgfSxcbiAgICAgICAgc2hhZG93U3R5bGU6IHtcbiAgICAgICAgICBjb2xvcjogJ3JnYmEoMjAwLDIwMCwyMDAsMC4yKSdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgZ3JpZDoge1xuICAgICAgdG9wOiAxMCxcbiAgICAgIGJvdHRvbTogMzIsXG4gICAgICBsZWZ0OiAxMCxcbiAgICAgIHJpZ2h0OiAzMixcbiAgICAgIC8vIHdpZHRoOiAnYXV0bycsXG4gICAgICAvLyBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIGNvbnRhaW5MYWJlbDogdHJ1ZVxuICAgIH0sXG4gICAgdmFsdWVBeGlzOiB7XG4gICAgICBheGlzTGluZToge1xuICAgICAgICBsaW5lU3R5bGU6IHtcbiAgICAgICAgICBjb2xvcjogJyNmZmYnIC8vICcjMDA4YWNkJ1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc3BsaXRBcmVhOiB7XG4gICAgICAgIHNob3c6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIHNwbGl0TGluZToge1xuICAgICAgICBzaG93OiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBuYW1lVGV4dFN0eWxlOiB7IC8vIFN0eWxlcyBmb3IgeCBhbmQgeSBheGlzIGxhYmVsc1xuICAgICAgICBjb2xvcjogJyNmZmYnLFxuICAgICAgICBmb250U2l6ZTogMTIsXG4gICAgICAgIGZvbnRXZWlnaHQ6ICdub3JtYWwnLFxuICAgICAgICBmb250RmFtaWx5OiAnU2hhcnBHcm90ZXNrLU1lZGl1bTIwJyAvLyAnTWFpc29uTmV1ZS1NZWRpdW0nXG4gICAgICB9LFxuICAgICAgbmFtZUxvY2F0aW9uOiAnbWlkZGxlJyxcbiAgICAgIG5hbWVHYXA6IDMyLFxuICAgICAgYXhpc0xhYmVsOiB7IC8vIFN0eWxlcyBmb3IgZ3JpZCBudW1iZXJzXG4gICAgICAgIGluc2lkZTogZmFsc2UsXG4gICAgICAgIHRleHRWZXJ0aWNhbEFsaWduOiAnbWlkZGxlJyxcbiAgICAgICAgY29sb3I6IGF4aXNCbHVlLCAvLyAnI2ZmZicsXG4gICAgICAgIGZvbnRGYW1pbHk6ICdNYWlzb25OZXVlLU1lZGl1bScsXG4gICAgICAgIGZvbnRTaXplOiAxMixcbiAgICAgIH1cbiAgICB9LFxuICAgIGxpbmU6IHtcbiAgICAgIHNtb290aDogdHJ1ZSxcbiAgICAgIHN5bWJvbDogJ2VtcHR5Q2lyY2xlJyxcbiAgICAgIHN5bWJvbFNpemU6IDNcbiAgICB9LFxuICAgIHNjYXR0ZXI6IHtcbiAgICAgIHN5bWJvbDogJ2NpcmNsZScsXG4gICAgICAvL2NvbG9yOiAncmdiYSgxNDgsIDIyOCwgMjU0LCAwLjgpJyxcbiAgICAgIC8vY29sb3I6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCknLFxuICAgICAgLy9jb2xvcjogJ3JnYmEoMTcxLCAyMTcsIDIzMywgMC44KScsXG4gICAgICBjb2xvcjogJ3JnYmEoMjAyLDIzNSwxOTAsIDAuNzcpJyxcbiAgICAgIGl0ZW1TdHlsZToge1xuICAgICAgICBib3JkZXJXaWR0aDogMC4yNSxcbiAgICAgICAgYm9yZGVyQ29sb3I6ICdyZ2JhKDEwNiwgMTQ1LCAxODUsIDAuOCknLFxuICAgICAgICBib3JkZXJUeXBlOiAnc29saWQnLFxuICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgIC8vIGJvcmRlck9wYWNpdHk6IDAsXG4gICAgICB9XG4gICAgfSxcbiAgICBncmFwaDoge1xuICAgICAgY29sb3I6IGNvbG9yUGFsZXR0ZVxuICAgIH1cbiAgfTtcblxuICB0aGlzLnN0YXRlcyA9IHtcbiAgICAvLyBkZWZhdWx0IHN0YXRlIHNoYXJlZCBieSBhbGwgc2NhdHRlcnBsb3RzXG4gICAgLy8gaHR0cHM6Ly9lY29tZmUuZ2l0aHViLmlvL2VjaGFydHMtZG9jL3B1YmxpYy9lbi9vcHRpb24uaHRtbFxuICAgIGJhc2U6IHtcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICBzaG93OiBmYWxzZSxcbiAgICAgICAgICB0ZXh0U3R5bGU6IHtcbiAgICAgICAgICAgIGZvbnRXZWlnaHQ6ICdub3JtYWwnLFxuICAgICAgICAgICAgY29sb3I6ICcjZmZmJyxcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdTaGFycEdyb3Rlc2stTWVkaXVtMjAnLFxuICAgICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc3VidGV4dFN0eWxlOiB7XG4gICAgICAgICAgICBmb250V2VpZ2h0OiAnbm9ybWFsJyxcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZicsXG4gICAgICAgICAgICBmb250RmFtaWx5OiAnTWFpc29uTmV1ZS1NZWRpdW0nLFxuICAgICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJ1xuICAgICAgICB9LFxuICAgICAgICBncmlkOiB7XG4gICAgICAgICAgdG9wOiAxMCxcbiAgICAgICAgICBib3R0b206IDI2LFxuICAgICAgICAgIGxlZnQ6IDEwLFxuICAgICAgICAgIHJpZ2h0OiAyNixcbiAgICAgICAgICB6bGV2ZWw6IDEwMCxcbiAgICAgICAgICBoZWlnaHQ6ICdhdXRvJywvLyAyODAsXG4gICAgICAgICAgd2lkdGg6ICdhdXRvJywgLy8gJ2F1dG8nLFxuICAgICAgICAgIGNvbnRhaW5MYWJlbDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB5QXhpczoge1xuICAgICAgICAgIHBvc2l0aW9uOiAncmlnaHQnLFxuICAgICAgICAgIHNwbGl0TGluZToge1xuICAgICAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBuYW1lR2FwOiAyNixcbiAgICAgICAgICBuYW1lVGV4dFN0eWxlOiB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnTWFpc29uTmV1ZS1NZWRpdW0nLFxuICAgICAgICAgICAgY29sb3I6IGF4aXNCbHVlLFxuICAgICAgICAgICAgZm9udFdlaWdodDogJ25vcm1hbCcsXG4gICAgICAgICAgICBmb250U2l6ZTogMTNcbiAgICAgICAgICB9LFxuICAgICAgICAgIHpsZXZlbDogMTAxLFxuICAgICAgICB9LFxuICAgICAgICB4QXhpczoge1xuICAgICAgICAgIG5hbWVHYXA6IDI2LFxuICAgICAgICAgIG5hbWVUZXh0U3R5bGU6IHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdNYWlzb25OZXVlLU1lZGl1bScsXG4gICAgICAgICAgICBjb2xvcjogYXhpc0JsdWUsXG4gICAgICAgICAgICBmb250U2l6ZTogMTMsXG4gICAgICAgICAgICBmb250V2VpZ2h0OiAnbm9ybWFsJyxcbiAgICAgICAgICAgIHZlcnRpY2FsQWxpZ246ICdib3R0b20nXG4gICAgICAgICAgfSxcbiAgICAgICAgICB6bGV2ZWw6IDEwMixcbiAgICAgICAgfSxcbiAgICAgICAgdG9vbHRpcDoge1xuICAgICAgICAgIHRyaWdnZXI6ICdpdGVtJyxcbiAgICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb246IDAuNixcbiAgICAgICAgICBzaG93RGVsYXk6IDUwLFxuICAgICAgICAgIGhpZGVEZWxheTogMCxcbiAgICAgICAgICAvLyBib3JkZXJDb2xvcjogJyNmZmYnLFxuICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaXRlbSk7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gX3NlbGYuZGF0YVtfc2VsZi5wcm9wcy5wcmVmaXhdO1xuICAgICAgICAgICAgbGV0IHJldHVyblN0cmluZyA9IG51bGw7XG4gICAgICAgICAgICBpZiAoISFpdGVtICYmICEhaXRlbS52YWx1ZSAmJiAhIWl0ZW0udmFsdWVbM10pIHtcbiAgICAgICAgICAgICAgY29uc3QgaXRlbU5hbWUgPVxuICAgICAgICAgICAgICAgIGRhdGEgJiZcbiAgICAgICAgICAgICAgICBkYXRhLm5hbWUgJiZcbiAgICAgICAgICAgICAgICBkYXRhLm5hbWVbaXRlbS52YWx1ZVszXV0gP1xuICAgICAgICAgICAgICAgIGRhdGEubmFtZVtpdGVtLnZhbHVlWzNdXSA6ICdVbmF2YWlsYWJsZSdcbiAgICAgICAgICAgICAgLy8gaXRlbVZhbHVlID0gaXRlbS52YWx1ZVszXSA/IGl0ZW0udmFsdWVbM10gOiBpdGVtLm5hbWU7XG4gICAgICAgICAgICAgIHJldHVyblN0cmluZyA9ICc8c3Bhbj4nICsgaXRlbU5hbWUgKyAnPC9zcGFuPjxicj4nXG4gICAgICAgICAgICAgICAgKyAnPHNtYWxsPlg6ICcgKyBpdGVtLnZhbHVlWzBdXG4gICAgICAgICAgICAgICAgKyAnJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7WTogJyArIGl0ZW0udmFsdWVbMV0gKyAnPC9zbWFsbD4nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaXRlbSk7XG4gICAgICAgICAgICAgIC8vIFNlbmQgYmFjayBhIGRpZmZlcmVudCBzdHJpbmcgZm9yIHRoZSBtYXJrYXJlYSB0b29sdGlwLlxuICAgICAgICAgICAgICByZXR1cm5TdHJpbmcgPSAnPHNwYW4+JyArIGl0ZW0uZGF0YS5uYW1lICsgJzwvc3Bhbj48YnI+J1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldHVyblN0cmluZztcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gYWRkIGEgcmVmIHByb3AgdG8gZ2V0IGEgcmVmZXJlbmNlIHRvIHRoZSByZWFjdCBjb21wb25lbnQgaW5zdGFuY2VcbiAgdGhpcy5wcm9wcyA9IE9iamVjdC5hc3NpZ24oXG4gICAgKHByb3BzIHx8IHt9KSxcbiAgICB7XG4gICAgICBwcmVmaXg6ICdkaXN0cmljdHMnLFxuICAgICAgb3B0aW9uczogdGhpcy5zdGF0ZXMuYmFzZS5vcHRpb25zLFxuICAgICAgZW5kcG9pbnQ6ICdodHRwczovL2QyZnlwZWI2Zjk3NHIxLmNsb3VkZnJvbnQubmV0L2Rldi9zY2F0dGVycGxvdC8nLFxuICAgICAgbWV0YVZhcnM6IHtcbiAgICAgICAgJ2NvdW50aWVzJzogWydpZCcsICduYW1lJywgJ2xhdCcsICdsb24nLCAnYWxsX3N6JyBdLFxuICAgICAgICAnZGlzdHJpY3RzJzogWydpZCcsICduYW1lJywgJ2xhdCcsICdsb24nLCAnYWxsX3N6JyBdLFxuICAgICAgICAnc2Nob29scyc6IFsnaWQnLCAnbmFtZScsICdsYXQnLCAnbG9uJywgJ2FsbF9zeicgXVxuICAgICAgfSxcbiAgICAgIGRhdGE6IHt9LFxuICAgICAgcmVmOiBmdW5jdGlvbihyZWYpIHtcbiAgICAgICAgX3NlbGYuY29tcG9uZW50ID0gcmVmO1xuICAgICAgfSxcbiAgICAgIG9uUmVhZHk6IGZ1bmN0aW9uKGVjaGFydEluc3RhbmNlKSB7XG4gICAgICAgIF9yZWFkeSA9IHRydWU7XG4gICAgICAgIF9zZWxmLnRyaWdnZXIoJ3JlYWR5JywgW19zZWxmXSlcbiAgICAgIH0sXG4gICAgICBvbkRhdGE6IGZ1bmN0aW9uKGRhdGEsIHJlZ2lvbikge1xuICAgICAgICBsZXQgY3VyckRhdGEgPSAoKF9zZWxmLmRhdGEgJiYgX3NlbGYuZGF0YVtyZWdpb25dKSB8fCB7fSlcbiAgICAgICAgY29uc3QgbmV3RGF0YSA9IHt9XG4gICAgICAgIG5ld0RhdGFbcmVnaW9uXSA9IE9iamVjdC5hc3NpZ24oY3VyckRhdGEsIGRhdGEpXG4gICAgICAgIF9zZWxmLmRhdGEgPSBPYmplY3QuYXNzaWduKChfc2VsZi5kYXRhIHx8IHt9KSwgbmV3RGF0YSlcbiAgICAgICAgX3NlbGYuc2V0UHJvcHMoe2RhdGE6X3NlbGYuZGF0YX0pXG4gICAgICB9LFxuICAgICAgdGhlbWU6IHRoZW1lXG4gICAgfVxuICApO1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBhbiBldmVudCB3aXRoIGBldmVudE5hbWVgIGFuZCBydW5zIGFsbCBoYW5kbGVyc1xuICAgKi9cbiAgdGhpcy50cmlnZ2VyID0gZnVuY3Rpb24oZXZlbnROYW1lLCBkYXRhKSB7XG4gICAgX2hhbmRsZXJzW2V2ZW50TmFtZV0gJiZcbiAgICBfaGFuZGxlcnNbZXZlbnROYW1lXS5mb3JFYWNoKGZ1bmN0aW9uKGgpIHtcbiAgICAgIGguYXBwbHkobnVsbCwgZGF0YSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhbiBldmVudCBoYW5kbGVyIHdpdGggdGhlIGFzc29jaWF0ZWQgZXZlbnROYW1lXG4gICAqIElmIGl0J3MgYSByZWFkeSBoYW5kbGVyIGFuZCBldmVyeXRoaW5nIGlzIHJlYWR5LCBydW4gaW1tZWRpYXRlbHkuXG4gICAqL1xuICB0aGlzLm9uID0gZnVuY3Rpb24oZXZlbnROYW1lLCBoYW5kbGVyKSB7XG4gICAgaWYgKF9oYW5kbGVyc1tldmVudE5hbWVdIClcbiAgICAgIF9oYW5kbGVyc1tldmVudE5hbWVdLnB1c2goaGFuZGxlcilcbiAgICBlbHNlXG4gICAgICBfaGFuZGxlcnNbZXZlbnROYW1lXSA9IFsgaGFuZGxlciBdXG4gICAgaWYgKGV2ZW50TmFtZSA9PT0gJ3JlYWR5JyAmJiBfcmVhZHkpIHtcbiAgICAgIGhhbmRsZXIoX3NlbGYuY29tcG9uZW50LCBfc2VsZi5jb21wb25lbnQuZWNoYXJ0KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYSBzdGF0ZSBnZW5lcmF0b3IgZm9yIHRoZSBzY2F0dGVycGxvdFxuICAgKi9cbiAgdGhpcy5hZGRTdGF0ZSA9IGZ1bmN0aW9uKHN0YXRlTmFtZSwgc3RhdGUpIHtcbiAgICB0aGlzLnN0YXRlc1tzdGF0ZU5hbWVdID0gc3RhdGU7XG4gIH1cblxuICAvKipcbiAgICogTG9hZCBhIHN0YXRlIGZvciB0aGUgc2NhdHRlcnBsb3RcbiAgICovXG4gIHRoaXMubG9hZFN0YXRlID0gZnVuY3Rpb24oc3RhdGVOYW1lLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgLy8gdGhpcy5jb21wb25lbnQuZWNoYXJ0LnNldE9wdGlvbih0aGlzLmdldFN0YXRlKHN0YXRlTmFtZSksIG9wdGlvbnMpXG4gICAgY29uc3QgbmV3U3RhdGUgPSB0aGlzLmdldFN0YXRlKHN0YXRlTmFtZSk7XG4gICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ25vdE1lcmdlJykpIHtcbiAgICAgIG5ld1N0YXRlWydub3RNZXJnZSddID0gb3B0aW9ucy5ub3RNZXJnZVxuICAgIH1cbiAgICB0aGlzLnNldFByb3BzKG5ld1N0YXRlKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbiBleGlzdGluZyBzdGF0ZSBmb3IgdGhlIHNjYXR0ZXJwbG90XG4gICAqL1xuICB0aGlzLmdldFN0YXRlID0gZnVuY3Rpb24oc3RhdGVOYW1lKSB7XG4gICAgaWYgKHRoaXMuc3RhdGVzLmhhc093blByb3BlcnR5KHN0YXRlTmFtZSkpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5zdGF0ZXNbc3RhdGVOYW1lXSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICByZXR1cm4gdGhpcy5zdGF0ZXNbc3RhdGVOYW1lXSh0aGlzKVxuICAgICAgaWYgKHR5cGVvZiB0aGlzLnN0YXRlc1tzdGF0ZU5hbWVdID09PSAnb2JqZWN0JylcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVzW3N0YXRlTmFtZV1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyBzdGF0ZSBmb3VuZCBmb3IgJyArIHN0YXRlTmFtZSlcbiAgICB9XG4gIH1cblxuICB0aGlzLmdldFNjYXR0ZXJwbG90U2VyaWVzID0gZnVuY3Rpb24gKHhWYXIsIHlWYXIsIHpWYXIsIGlkcykge1xuXG4gIH1cblxuICB0aGlzLmdldERhdGFTZXJpZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuY29tcG9uZW50LmdldE9wdGlvbigpO1xuICAgIGlmIChvcHRpb25zLnNlcmllcyAmJiBvcHRpb25zLnNlcmllcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBvcHRpb25zLnNlcmllcy5maW5kKGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMuaWQgPT09ICdiYXNlJyB9KVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYW4gb2JqZWN0IG9mIHByb3BzIGZvciB0aGUgcmVhY3QgY29tcG9uZW50XG4gICAqL1xuICB0aGlzLnNldFByb3BzID0gZnVuY3Rpb24ocHJvcHMpIHtcbiAgICB0aGlzLnByb3BzID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIHRoaXMucHJvcHMsXG4gICAgICBwcm9wc1xuICAgIClcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciB0aGUgY29tcG9uZW50IHdpdGggcHJvcHNcbiAgICovXG4gIHRoaXMucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gcmVuZGVyIHRoZSBjb21wb25lbnRcbiAgICBSZWFjdERPTS5yZW5kZXIoXG4gICAgICAvLyBSZWFjdC5jcmVhdGVFbGVtZW50KHNlZGFTY2F0dGVycGxvdCwgdGhpcy5wcm9wcywgbnVsbCksXG4gICAgICAvLyBjb250YWluZXJcbiAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoc2VkYVNjYXR0ZXJwbG90LCBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByb3BzKSwgbnVsbCksIGNvbnRhaW5lclxuICAgICk7XG4gIH1cblxuICB0aGlzLnJlbmRlcigpXG5cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGFycmF5IHdpdGggdGhlIElEcyB0aGF0IGNvcnJlc3BvbmQgdG9cbiAqIHRoZSBsYXJnZXN0IGBudW1gIHZhbHVlcy5cbiAqL1xuU2NhdHRlcnBsb3QucHJvdG90eXBlLmdldFNlcmllc0RhdGFCeVNpemUgPSBmdW5jdGlvbih2YWx1ZXMsIG51bSkge1xuICBudW0gPSBudW0gfHwgMTAwO1xuICB2YXIgc29ydGVkID0gdmFsdWVzXG4gICAgLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgcmV0dXJuIGJbMl0gLSBhWzJdO1xuICAgIH0pO1xuICByZXR1cm4gc29ydGVkLnNsaWNlKDAsIG51bSlcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGFycmF5IHdpdGggdGhlIElEcyB0aGF0IGNvcnJlc3BvbmQgdG9cbiAqIHRoZSBsYXJnZXN0IGBudW1gIHZhbHVlcy5cbiAqL1xuU2NhdHRlcnBsb3QucHJvdG90eXBlLmdldFNlcmllc0RhdGFGb3JJZHMgPSBmdW5jdGlvbih2YWx1ZXMsIGlkcykge1xuICByZXR1cm4gaWRzXG4gICAgLm1hcChmdW5jdGlvbihpZCkge1xuICAgICAgcmV0dXJuIHZhbHVlcy5maW5kKGZ1bmN0aW9uKHYpIHsgcmV0dXJuIHZbM10gPT09IGlkIH0pO1xuICAgIH0pXG4gICAgLmZpbHRlcihmdW5jdGlvbih2KSB7IHJldHVybiB2IH0pO1xufVxuXG4vKiogUmV0dXJucyBhbiBhcnJheSBvZiB2YWx1ZXMgdGhhdCBmYWxsIHdpdGhpbiB0aGUgcmFuZ2Ugb24gdGhlIHByb3ZpZGVkIGF4aXMgKi9cblNjYXR0ZXJwbG90LnByb3RvdHlwZS5nZXRTZXJpZXNEYXRhSW5SYW5nZSA9IGZ1bmN0aW9uKHZhbHVlcywgYXhpcywgcmFuZ2UpIHtcbiAgdmFyIGluZGV4ID0gYXhpcyA9PT0gJ3gnID8gMCA6XG4gICAgYXhpcyA9PT0gJ3knID8gMSA6IDI7XG4gIHJldHVybiB2YWx1ZXMuZmlsdGVyKGZ1bmN0aW9uKHYpIHtcbiAgICByZXR1cm4gdltpbmRleF0gPiByYW5nZS5taW4gJiYgdltpbmRleF0gPCByYW5nZS5tYXg7XG4gIH0pXG59XG5cblNjYXR0ZXJwbG90LnByb3RvdHlwZS5mb3JtYXRUb29sdGlwID0gZnVuY3Rpb24oaXRlbSwgZGF0YSwgeExhYmVsLCB5TGFiZWwsIHhQZXJjZW50LCB5UGVyY2VudCkge1xuICB4UGVyY2VudCA9IHhQZXJjZW50IHx8IDA7XG4gIHlQZXJjZW50ID0geVBlcmNlbnQgfHwgMDtcbiAgLy8gY29uc29sZS5sb2coaXRlbSk7XG4gIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xuICBsZXQgcmV0dXJuU3RyaW5nID0gbnVsbDtcbiAgaWYgKCEhaXRlbSAmJiAhIWl0ZW0udmFsdWUgJiYgISFpdGVtLnZhbHVlWzNdKSB7XG4gICAgY29uc3QgaXRlbU5hbWUgPVxuICAgICAgZGF0YSAmJlxuICAgICAgZGF0YS5kaXN0cmljdHMgJiZcbiAgICAgIGRhdGEuZGlzdHJpY3RzLm5hbWUgJiZcbiAgICAgIGRhdGEuZGlzdHJpY3RzLm5hbWVbaXRlbS52YWx1ZVszXV0gP1xuICAgICAgZGF0YS5kaXN0cmljdHMubmFtZVtpdGVtLnZhbHVlWzNdXSA6ICdVbmF2YWlsYWJsZSc7XG4gICAgY29uc3QgdGVzdExlbmd0aCA9IChcbiAgICAgIHhMYWJlbCArXG4gICAgICB5TGFiZWwgK1xuICAgICAgU3RyaW5nKGl0ZW0udmFsdWVbMF0pICtcbiAgICAgIFN0cmluZyhpdGVtLnZhbHVlWzFdKVxuICAgICkubGVuZ3RoO1xuICAgIGNvbnN0IF94X3ZhbCA9IHhQZXJjZW50ID8gdGhpcy5nZXRQZXJjZW50RGlmZkxhYmVsKGl0ZW0udmFsdWVbMF0pIDogaXRlbS52YWx1ZVswXTtcbiAgICBjb25zdCBfeV92YWwgPSB5UGVyY2VudCA/IHRoaXMuZ2V0UGVyY2VudERpZmZMYWJlbChpdGVtLnZhbHVlWzFdKSA6IGl0ZW0udmFsdWVbMV07XG4gICAgY29uc3QgbGluZUJyZWFrID0gdGVzdExlbmd0aCA+IGl0ZW1OYW1lLmxlbmd0aCA/ICc8YnI+JyA6ICcmbmJzcDsmbmJzcDsnO1xuICAgIHJldHVyblN0cmluZyA9ICc8c3Bhbj4nICsgaXRlbU5hbWUgKyAnPC9zcGFuPjxicj4nXG4gICAgICArICc8c21hbGw+JyArIHhMYWJlbCArICc6ICcgKyBfeF92YWwgKyBsaW5lQnJlYWtcbiAgICAgICsgeUxhYmVsICsgJzogJyArIF95X3ZhbCArICc8L3NtYWxsPic7XG4gIH0gZWxzZSB7XG4gICAgLy8gY29uc29sZS5sb2coaXRlbSk7XG4gICAgLy8gU2VuZCBiYWNrIGEgZGlmZmVyZW50IHN0cmluZyBmb3IgdGhlIG1hcmthcmVhIHRvb2x0aXAuXG4gICAgcmV0dXJuU3RyaW5nID0gJzxzcGFuPicgKyBpdGVtLmRhdGEubmFtZSArICc8L3NwYW4+PGJyPidcbiAgfVxuICByZXR1cm4gcmV0dXJuU3RyaW5nO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIHJvdW5kZWQgdG8gdGhlIHByb3ZpZGVkIG51bWJlciBvZiBkZWNpbWFsXG4gKiBwbGFjZXMuXG4gKi9cblNjYXR0ZXJwbG90LnByb3RvdHlwZS5mb3JtYXROdW1iZXIgPSBmdW5jdGlvbih2YWwsIGRlY2ltYWxzKSB7XG4gIGRlY2ltYWxzID0gZGVjaW1hbHMgfHwgMlxuICBpZiAoIXZhbCAmJiB2YWwgIT09IDApIHsgcmV0dXJuICdOL0EnIH1cbiAgY29uc3QgZmFjdG9yID0gTWF0aC5wb3coMTAsIGRlY2ltYWxzKTtcbiAgcmV0dXJuIE1hdGgucm91bmQodmFsKmZhY3RvcikvZmFjdG9yO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgcGVyY2VudCBzdHJpbmcgZnJvbSB0aGUgcHJvdmlkZWQgdmFsdWVcbiAqIEBwYXJhbSB7bnVtYmVyfSB2XG4gKi9cblNjYXR0ZXJwbG90LnByb3RvdHlwZS5mb3JtYXRQZXJjZW50ID0gZnVuY3Rpb24odiwgZGVjaW1hbHMpIHtcbiAgZGVjaW1hbHMgPSBkZWNpbWFscyB8fCAwXG4gIGlmICghdiAmJiB2ICE9PSAwKSB7IHJldHVybiAnTi9BJyB9XG4gIHJldHVybiB0aGlzLmZvcm1hdE51bWJlcih2ICogMTAwLCBkZWNpbWFscylcbn1cbi8qKlxuICogUmV0dXJucyBhIHBlcmNlbnQgc3RyaW5nIG9mIGhvdyBmYXIgdGhlIHByb3ZpZGVkIHZhbHVlXG4gKiBpcyBmcm9tIHRoZSBwcm92aWRlZCBgZnJvbWAgdmFsdWUuICh1c2VkIGZvciBsZWFybmluZyByYXRlcylcbiAqIEBwYXJhbSB7bnVtYmVyfSB2IHRoZSB2YWx1ZSB0byBmb3JtYXRcbiAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tIHRoZSBwb2ludCBvZiByZWZlcmVuY2UgdG8gZGV0ZXJtaW5lIHdoYXQgdGhlICUgZGlmZiBpc1xuICovXG5TY2F0dGVycGxvdC5wcm90b3R5cGUuZm9ybWF0UGVyY2VudERpZmYgPSBmdW5jdGlvbih2LCBmcm9tLCBkZWNpbWFscykge1xuICBkZWNpbWFscyA9IGRlY2ltYWxzIHx8IDBcbiAgZnJvbSA9IGZyb20gfHwgMTtcbiAgaWYgKCF2ICYmIHYgIT09IDApIHsgcmV0dXJuICdOL0EnIH1cbiAgcmV0dXJuIHRoaXMuZm9ybWF0UGVyY2VudCh2IC0gZnJvbSwgZGVjaW1hbHMpO1xufVxuXG5TY2F0dGVycGxvdC5wcm90b3R5cGUuZ2V0UGVyY2VudERpZmZMYWJlbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgLy8gY29uc29sZS5sb2coJ1NjYXR0ZXJwbG90LmdldFBlcmNlbnREaWZmTGFiZWwoKScpO1xuICAvLyBjb25zb2xlLmxvZyhpdGVtKTtcbiAgcmV0dXJuIHRoaXMuZm9ybWF0UGVyY2VudERpZmYoaXRlbSwgMSwgMCkgKyAnJSc7XG59XG4iXX0=